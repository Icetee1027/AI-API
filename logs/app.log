{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.406","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.406","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.406","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.406","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.406","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.407","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"02:02:58.407","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:10.853","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"f05d7722-fef4-4372-bb18-099564f15589"}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:10.854","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"f05d7722-fef4-4372-bb18-099564f15589"}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:10.854","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"f05d7722-fef4-4372-bb18-099564f15589"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:10.854","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"f05d7722-fef4-4372-bb18-099564f15589","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:10.855","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:10.859","msg":"快取未命中","service":"recipe-generator","鍵":"multimodal:74453f9b660bab35a5cd0dbe0755cc200ffb86eea813d7c53dfb3cce64f2386f:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851"}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:10.859","msg":"OpenRouter image_url debug","service":"recipe-generator","prefix":"[HAS_PREFIX]","image_url_start":"data:image/jpeg;base64,/9j/2wCEAAUDBAQEAwUEBAQFBQUGBwwIBwcHB"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.117","msg":"快取已儲存","service":"recipe-generator","鍵":"multimodal:74453f9b660bab35a5cd0dbe0755cc200ffb86eea813d7c53dfb3cce64f2386f:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.117","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.117","msg":"食物辨識成功","service":"recipe-generator","request_id":"f05d7722-fef4-4372-bb18-099564f15589","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.117","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.265530625s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:13.125","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"8e628a70-574a-4513-8efa-a2b75e5666a7"}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:13.125","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"8e628a70-574a-4513-8efa-a2b75e5666a7"}
{"level":"\u001b[36mDBG\u001b[0m","time":"02:03:13.125","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"8e628a70-574a-4513-8efa-a2b75e5666a7"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.125","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"8e628a70-574a-4513-8efa-a2b75e5666a7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:13.125","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"02:03:13.125","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"02:03:13.125","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"8e628a70-574a-4513-8efa-a2b75e5666a7","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"02:03:13.126","msg":"用戶端錯誤","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"978.667µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:19.963","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:19.963","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"02:03:19.963","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
