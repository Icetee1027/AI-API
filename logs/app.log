{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.515","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"1h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"1h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"AI service initialized successfully","service":"recipe-generator","workers":5,"max_queue_size":100,"cache_enabled":true,"model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:24.516","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:43.993","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"2eabe78b-df8a-4ca0-8801-f171b9c590a3","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:43.993","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:43.993","msg":"Sending request to OpenRouter","service":"recipe-generator","model":"google/gemini-2.0-flash-001","messages":1,"is_vision_model":false}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:50.398","msg":"Successfully generated response from AI service","service":"recipe-generator","model":"google/gemini-2.0-flash-001","content_length":3079}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:50.398","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:24:50.398","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:50.399","msg":"食譜推薦成功","service":"recipe-generator","request_id":"2eabe78b-df8a-4ca0-8801-f171b9c590a3","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:50.399","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.406325083s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:50.409","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4ad5880b-246a-4428-bcf5-d20a74707852","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:24:50.409","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"4ad5880b-246a-4428-bcf5-d20a74707852"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:24:50.409","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"440.542µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:57.919","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"b52bc74b-f280-4d1f-9914-e0ebabd7af9c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:57.920","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"19:24:57.920","msg":"Sending request to OpenRouter","service":"recipe-generator","model":"google/gemini-2.0-flash-001","messages":1,"is_vision_model":false}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:06.452","msg":"Successfully generated response from AI service","service":"recipe-generator","model":"google/gemini-2.0-flash-001","content_length":4554}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:06.452","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:25:06.452","current_size":2,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"19:25:06.452","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal string into Go struct field .recipe.nutrition_info.calories of type int","request_id":"b52bc74b-f280-4d1f-9914-e0ebabd7af9c"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:25:06.452","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.532905666s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:27.783","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"f4e2fbe7-6ed3-4325-a263-271ee1cd6bd9","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:27.783","msg":"Cache hit","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:25:06.452","access_count":1,"age":"21.330077541s","hit_ratio":0.3333333333333333}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:27.783","msg":"Using cached response","service":"recipe-generator"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:25:27.783","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal string into Go struct field .recipe.nutrition_info.calories of type int","request_id":"f4e2fbe7-6ed3-4325-a263-271ee1cd6bd9"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:25:27.783","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"706.834µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:46.730","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:46.731","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:46.731","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":0,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.961","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"1h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"1h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"AI service initialized successfully","service":"recipe-generator","workers":5,"max_queue_size":100,"cache_enabled":true,"model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:50.962","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:55.062","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"418a751f-d5ae-4b65-9cba-a0f7532f182c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:55.062","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"19:25:55.062","msg":"Sending request to OpenRouter","service":"recipe-generator","model":"google/gemini-2.0-flash-001","messages":1,"is_vision_model":false}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:01.957","msg":"Successfully generated response from AI service","service":"recipe-generator","model":"google/gemini-2.0-flash-001","content_length":3711}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:01.958","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:26:01.958","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:01.958","msg":"食譜生成成功","service":"recipe-generator","request_id":"418a751f-d5ae-4b65-9cba-a0f7532f182c","dish_name":"手機炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:01.958","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.896684042s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:16.881","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"380d44d5-90c6-4f31-b4ce-64587abb4d07","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:16.881","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:16.881","msg":"Sending request to OpenRouter","service":"recipe-generator","model":"google/gemini-2.0-flash-001","messages":1,"is_vision_model":false}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:25.049","msg":"Successfully generated response from AI service","service":"recipe-generator","model":"google/gemini-2.0-flash-001","content_length":4110}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:25.049","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:26:25.049","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:25.051","msg":"食譜推薦成功","service":"recipe-generator","request_id":"380d44d5-90c6-4f31-b4ce-64587abb4d07","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:25.051","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.169604834s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:25.059","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"cbb40ba8-0107-4f9c-a5ee-c457e1d23336","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:26:25.059","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"cbb40ba8-0107-4f9c-a5ee-c457e1d23336"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:26:25.059","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"322.375µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.882","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7095efbf-8099-48e9-bda7-0c81e7c024b8","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.882","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:26:25.049","access_count":1,"age":"2.833049583s","hit_ratio":0.3333333333333333}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.882","msg":"Using cached response","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.882","msg":"食譜推薦成功","service":"recipe-generator","request_id":"7095efbf-8099-48e9-bda7-0c81e7c024b8","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.883","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"612.459µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"19:26:27.885","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7c5488e6-6b70-4b94-a8dd-e1e8a0766cee","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:26:27.885","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"7c5488e6-6b70-4b94-a8dd-e1e8a0766cee"}
{"level":"\u001b[31mERR\u001b[0m","time":"19:26:27.885","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"232.625µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:06:09.431","msg":"Loading configuration","service":"recipe-generator","openai_api_key":"****","openai_model":"gpt-4-vision-preview","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:06:09.432","msg":"Failed to load config","service":"recipe-generator","error":"invalid config: openai api key is required"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:18.621","msg":"Loading configuration","service":"recipe-generator","openai_api_key":"****","openai_model":"gpt-4-vision-preview","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:10:18.622","msg":"Failed to load config","service":"recipe-generator","error":"invalid config: openai api key is required"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:49.650","msg":"Loading configuration","service":"recipe-generator","openai_api_key":"****","openai_model":"gpt-4-vision-preview","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:49.651","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:49.651","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:49.651","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:10:49.651","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:10:49.651","msg":"Failed to initialize AI service","service":"recipe-generator","error":"failed to create OpenAI service: OpenAI API key is required"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:10:49.651","msg":"Failed to setup router","service":"recipe-generator","error":"failed to initialize AI service: failed to create OpenAI service: OpenAI API key is required"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:14:54.794","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:14:54.795","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:14:54.795","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:14:54.795","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:14:54.795","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:14:54.868","msg":"Failed to initialize AI service","service":"recipe-generator","error":"failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:14:54.868","msg":"Failed to setup router","service":"recipe-generator","error":"failed to initialize AI service: failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:16:00.621","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:16:00.621","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:16:00.621","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:16:00.621","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:16:00.621","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:16:00.693","msg":"Failed to initialize AI service","service":"recipe-generator","error":"failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:16:00.693","msg":"Failed to setup router","service":"recipe-generator","error":"failed to initialize AI service: failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:23:47.836","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:23:47.837","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:23:47.837","msg":"Cache disabled","service":"recipe-generator"}
{"level":"\u001b[35mFAT\u001b[0m","time":"20:23:47.837","msg":"Failed to initialize cache manager","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.370","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Cache disabled","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Initializing services","service":"recipe-generator","cache_enabled":false,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":false,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":false,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:19.371","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:48.115","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:48.116","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:56.632","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:56.633","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:56.633","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:56.633","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:24:56.633","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:24:56.704","msg":"Failed to initialize AI service","service":"recipe-generator","error":"failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:24:56.704","msg":"Failed to setup router","service":"recipe-generator","error":"failed to initialize AI service: failed to create cache service: failed to connect to Redis: dial tcp [::1]:6379: connect: connection refused"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.343","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.344","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:10.345","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:23.968","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"e4bc179d-0dec-4358-9840-669c030c9857","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:23.969","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"20:30:26.412","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: no choices in OpenRouter response","request_id":"e4bc179d-0dec-4358-9840-669c030c9857"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:30:26.413","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.444605667s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:30:26.449","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"13e12c53-39e3-4474-97d2-2966c6f4a5be","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:30:26.449","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"13e12c53-39e3-4474-97d2-2966c6f4a5be"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:30:26.449","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"384.25µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:34:32.220","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ab4c0ba5-d9f4-47e0-8efb-ca671f193009","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:34:32.220","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:33.725","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: no choices in OpenRouter response","request_id":"ab4c0ba5-d9f4-47e0-8efb-ca671f193009"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:33.726","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.50587225s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:34:33.761","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"39b99e1b-3c5e-4c0b-ac2e-4833a4d0fbd7","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:33.762","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"39b99e1b-3c5e-4c0b-ac2e-4833a4d0fbd7"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:33.762","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"360.166µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:34:50.349","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"fecdd356-de78-40b3-a295-7de62ef8beed","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:50.349","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"fecdd356-de78-40b3-a295-7de62ef8beed"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:50.349","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"201.459µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:34:50.361","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d881e6d4-05e5-4eb2-a769-0dc5a6443351","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:50.361","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"d881e6d4-05e5-4eb2-a769-0dc5a6443351"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:34:50.361","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"139.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:35:01.009","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"956b6bc8-823b-4640-b2c9-3c92a4c54f49","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:35:01.010","msg":"食譜生成失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"956b6bc8-823b-4640-b2c9-3c92a4c54f49"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:35:01.010","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"235.708µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:35:08.171","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"74ffcf2d-eff3-404f-9a87-93e548e0fe74","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:35:08.171","msg":"食譜生成失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"74ffcf2d-eff3-404f-9a87-93e548e0fe74"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:35:08.171","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"209.083µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"20:35:08.868","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"29.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:08.183","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:08.184","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:08.184","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.566","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:14.567","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:21.800","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"c099273b-50f5-4243-a03f-e957d7752a4d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:21.801","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"c099273b-50f5-4243-a03f-e957d7752a4d","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:21.801","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"c099273b-50f5-4243-a03f-e957d7752a4d","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:21.801","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:21.801","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"20:37:24.090","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: no choices in OpenRouter response","request_id":"c099273b-50f5-4243-a03f-e957d7752a4d"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:37:24.091","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.290951s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:24.123","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"9fe9b44e-df83-4272-944d-58ec63070035","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:24.123","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"9fe9b44e-df83-4272-944d-58ec63070035","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:37:24.123","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"9fe9b44e-df83-4272-944d-58ec63070035","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"20:37:24.123","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"9fe9b44e-df83-4272-944d-58ec63070035"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:37:24.123","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"520.042µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:49.235","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:49.235","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:49.235","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.612","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.612","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.612","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.612","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.612","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.613","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.613","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:41:51.613","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:42:03.345","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b4055aef-5602-4e92-b796-e552a1cf5d38","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:42:03.346","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b4055aef-5602-4e92-b796-e552a1cf5d38","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:42:03.346","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b4055aef-5602-4e92-b796-e552a1cf5d38","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:42:03.346","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:42:03.346","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"20:42:05.038","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: no choices in OpenRouter response","request_id":"b4055aef-5602-4e92-b796-e552a1cf5d38"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:42:05.038","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.693806917s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:14.690","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:14.691","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:14.691","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.138","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:34.139","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:40.704","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"52c84120-bdb1-4f7a-a0fa-0cfca6f37896","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:40.704","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"52c84120-bdb1-4f7a-a0fa-0cfca6f37896","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:40.704","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"52c84120-bdb1-4f7a-a0fa-0cfca6f37896","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:40.704","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:40.705","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:43:47.918","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:43:47.918","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:43:47.919","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '`' looking for beginning of value","request_id":"52c84120-bdb1-4f7a-a0fa-0cfca6f37896"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:43:47.919","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.215944292s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:48.906","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:48.906","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:48.906","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.301","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:54.302","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:59.187","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"a70b316f-1236-4782-ba77-03eb8af8699d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:59.188","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"a70b316f-1236-4782-ba77-03eb8af8699d","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:59.188","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"a70b316f-1236-4782-ba77-03eb8af8699d","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:59.188","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:44:59.188","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:45:06.631","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:45:06.631","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:45:06.631","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: unexpected end of JSON input","request_id":"a70b316f-1236-4782-ba77-03eb8af8699d"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:45:06.631","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.444882458s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:19.592","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:19.592","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:19.592","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.220","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.221","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:48:24.222","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:10.242","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5f745c6a-e84b-4a6c-9a9b-3e8dd366efcc","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:10.243","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5f745c6a-e84b-4a6c-9a9b-3e8dd366efcc","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:10.243","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5f745c6a-e84b-4a6c-9a9b-3e8dd366efcc","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:10.244","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:10.244","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:24.077","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"20:49:24.077","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:24.078","msg":"食譜推薦成功","service":"recipe-generator","request_id":"5f745c6a-e84b-4a6c-9a9b-3e8dd366efcc","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:24.079","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"13.8364345s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:36.612","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"74de4289-92ba-46b3-b78b-d0c45a731491","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:49:36.613","msg":"食譜生成失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"74de4289-92ba-46b3-b78b-d0c45a731491"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:49:36.613","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"379.584µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:48.125","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"74ed9430-00ed-48c6-bfd2-d80eea1ae1f4","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:49:48.125","msg":"食譜生成失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"74ed9430-00ed-48c6-bfd2-d80eea1ae1f4"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:49:48.125","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"277.666µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:57.130","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:57.131","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:49:57.131","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.083","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.083","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:04.084","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:17.029","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"7c52c92b-a621-4cb7-b273-549117b12ed8","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:17.029","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:50:28.101","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:50:28.101","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:50:28.101","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '`' looking for beginning of value","request_id":"7c52c92b-a621-4cb7-b273-549117b12ed8"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:50:28.101","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"11.072778542s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:43.205","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:43.205","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:43.206","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:47.734","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:53.825","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"199271bd-b96c-46fe-a6cb-7478b1ae80cd","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:53.826","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:51:59.881","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:51:59.881","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:51:59.881","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '`' looking for beginning of value","request_id":"199271bd-b96c-46fe-a6cb-7478b1ae80cd"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:51:59.881","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.055830125s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:53:16.486","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:53:16.486","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:53:16.486","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.601","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:21.602","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:33.978","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"60db370b-4b33-4e9d-a083-77f7cf25ab6c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:33.979","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:56:40.792","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:56:40.792","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:56:40.792","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal string into Go struct field .recipe.nutrition_info.calories of type int","request_id":"60db370b-4b33-4e9d-a083-77f7cf25ab6c"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:56:40.793","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.814763708s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:23.384","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:23.385","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:23.385","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.698","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.699","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.699","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.699","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.699","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.700","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.700","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:42.700","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:45.789","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"4d339d96-7cb8-4b31-885f-bdd47960c26f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:45.789","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"20:59:55.791","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"20:59:55.791","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"20:59:55.791","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal number into Go struct field .recipe.nutrition_info.calories of type string","request_id":"4d339d96-7cb8-4b31-885f-bdd47960c26f"}
{"level":"\u001b[31mERR\u001b[0m","time":"20:59:55.791","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"10.003092042s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:34.068","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:34.068","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:34.068","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.899","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.900","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:47.900","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:57.419","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"130937e4-9e92-4432-a5ed-184ec1559915","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:00:57.420","msg":"Cache miss","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:01:05.790","msg":"Cache entry set","service":"recipe-generator","key":"text:69a1a2f5ae441193bfaef779153c0974f1f32a90ffe1f8c675f7af1945a301dd","expires_at":"21:01:05.790","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:01:05.791","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal number into Go struct field .recipe.nutrition_info.calories of type string","request_id":"130937e4-9e92-4432-a5ed-184ec1559915"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:01:05.791","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.372482958s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:15:59.213","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:15:59.213","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:15:59.213","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.271","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:17.272","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:23.093","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3f685fdf-84ac-4709-8b1c-91030e211e3f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:23.093","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3f685fdf-84ac-4709-8b1c-91030e211e3f","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:23.093","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3f685fdf-84ac-4709-8b1c-91030e211e3f","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:23.094","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:23.094","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.698","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:16:33.698","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.699","msg":"食譜推薦成功","service":"recipe-generator","request_id":"3f685fdf-84ac-4709-8b1c-91030e211e3f","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.699","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"10.606451375s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.708","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3a5468f4-a334-4f2e-a136-e7b8a0b88cd0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.708","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3a5468f4-a334-4f2e-a136-e7b8a0b88cd0","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:33.708","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3a5468f4-a334-4f2e-a136-e7b8a0b88cd0","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:16:33.708","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"3a5468f4-a334-4f2e-a136-e7b8a0b88cd0"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:16:33.708","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"347.75µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:16:43.424","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"cd487ba1-1a36-4ba0-aab1-9015fb10c715","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:16:43.424","msg":"食譜生成失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"cd487ba1-1a36-4ba0-aab1-9015fb10c715"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:16:43.424","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"280.416µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:18:08.583","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"c98b8102-d1c0-49dd-9100-5be04fddd832","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:18:08.583","msg":"Cache miss","service":"recipe-generator","key":"text:68a1fa7e0696bf2ce34a07448e1f57a676791e539f05263b59c590801b966ba2","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:18:18.071","msg":"Cache entry set","service":"recipe-generator","key":"text:68a1fa7e0696bf2ce34a07448e1f57a676791e539f05263b59c590801b966ba2","expires_at":"21:18:18.071","current_size":2,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:18:18.072","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal array into Go struct field .recipe of type common.Recipe","request_id":"c98b8102-d1c0-49dd-9100-5be04fddd832"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:18:18.072","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.48872425s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:04.340","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:04.340","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:04.340","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.758","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:08.759","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:20.036","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"35a5da10-c7e9-442e-be92-55784d9bfab5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:20.037","msg":"Cache miss","service":"recipe-generator","key":"text:68a1fa7e0696bf2ce34a07448e1f57a676791e539f05263b59c590801b966ba2","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:21:28.034","msg":"Cache entry set","service":"recipe-generator","key":"text:68a1fa7e0696bf2ce34a07448e1f57a676791e539f05263b59c590801b966ba2","expires_at":"21:21:28.034","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:21:28.034","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal array into Go struct field .recipe of type common.Recipe","request_id":"35a5da10-c7e9-442e-be92-55784d9bfab5"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:21:28.034","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.998962833s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:18.092","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:18.092","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:18.092","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.838","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.839","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.839","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.839","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.839","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.839","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.840","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:24.840","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:30.455","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"a6057126-aaa8-4ad3-b038-0062492ef9d5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:30.455","msg":"Cache miss","service":"recipe-generator","key":"text:6d1906e694b445dd4e45189a04206b9621db0e6035f3dba5c1375ccce5089f0a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:22:33.471","msg":"Cache entry set","service":"recipe-generator","key":"text:6d1906e694b445dd4e45189a04206b9621db0e6035f3dba5c1375ccce5089f0a","expires_at":"21:22:33.471","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:22:33.472","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal object into Go struct field Recipe.recipe of type []common.RecipeStep","request_id":"a6057126-aaa8-4ad3-b038-0062492ef9d5"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:22:33.472","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.017831208s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:27.263","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:27.264","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:27.264","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.183","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:31.184","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:40.987","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"028eac58-bd9b-45ca-bfef-5069bcd1dda5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:40.988","msg":"Cache miss","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:26:50.721","msg":"Cache entry set","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","expires_at":"21:26:50.721","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:26:50.722","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal array into Go struct field .recipe of type common.Recipe","request_id":"028eac58-bd9b-45ca-bfef-5069bcd1dda5"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:26:50.722","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.735775958s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:03.381","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:03.381","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:03.381","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.636","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:07.637","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:10.706","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"0182f51f-8a04-4bcf-a7ae-2b8800a3a370","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:10.706","msg":"Cache miss","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:28:20.159","msg":"Cache entry set","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","expires_at":"21:28:20.159","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"21:28:20.160","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: json: cannot unmarshal array into Go struct field .recipe of type common.Recipe","request_id":"0182f51f-8a04-4bcf-a7ae-2b8800a3a370"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:28:20.160","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.454576417s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:29:57.072","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:29:57.073","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:29:57.073","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.822","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:10.823","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:17.613","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"b4c3c7d8-c993-4a31-acf6-b8f1727425d7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:17.613","msg":"Cache miss","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:26.585","msg":"Cache entry set","service":"recipe-generator","key":"text:312a2cd14a126b85cc14913146745a697e6531406e3348fff07c5115d2d41789","expires_at":"21:30:26.585","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:26.585","msg":"食譜生成成功","service":"recipe-generator","request_id":"b4c3c7d8-c993-4a31-acf6-b8f1727425d7","dish_name":"手機炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:30:26.586","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.973357042s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.821","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"c97bd238-fb4c-45a4-aa78-99b81fe06262","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.821","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"c97bd238-fb4c-45a4-aa78-99b81fe06262","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.821","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"c97bd238-fb4c-45a4-aa78-99b81fe06262","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.821","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:02.821","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"c97bd238-fb4c-45a4-aa78-99b81fe06262"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:02.821","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"411.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.833","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"2f1d296a-c702-467c-84fe-dd0a87455594","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.833","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"2f1d296a-c702-467c-84fe-dd0a87455594","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:02.833","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"2f1d296a-c702-467c-84fe-dd0a87455594","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:02.833","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"2f1d296a-c702-467c-84fe-dd0a87455594"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:02.833","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"263.5µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:30.096","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"95d69e0b-1ee8-4554-8e1d-094e984ea8a4","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:30.096","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"95d69e0b-1ee8-4554-8e1d-094e984ea8a4","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:30.097","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"95d69e0b-1ee8-4554-8e1d-094e984ea8a4","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:30.097","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:30.097","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.841","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:31:39.841","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.842","msg":"食譜推薦成功","service":"recipe-generator","request_id":"95d69e0b-1ee8-4554-8e1d-094e984ea8a4","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.842","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.745913875s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.851","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"9d9b2173-9479-460e-a717-f7a7cbbfb233","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.852","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"9d9b2173-9479-460e-a717-f7a7cbbfb233","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:31:39.852","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"9d9b2173-9479-460e-a717-f7a7cbbfb233","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:39.852","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"9d9b2173-9479-460e-a717-f7a7cbbfb233"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:31:39.852","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"370.625µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.671","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5b55cb68-207f-4337-abbd-1b5226fec15e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.672","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5b55cb68-207f-4337-abbd-1b5226fec15e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.672","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5b55cb68-207f-4337-abbd-1b5226fec15e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.672","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.672","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:31:39.841","access_count":1,"age":"1m19.831326292s","hit_ratio":0.3333333333333333}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.673","msg":"食譜推薦成功","service":"recipe-generator","request_id":"5b55cb68-207f-4337-abbd-1b5226fec15e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.673","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.613541ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.674","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"799717f0-58a6-4f4f-a1df-050e24a1a6a2","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.674","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"799717f0-58a6-4f4f-a1df-050e24a1a6a2","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:32:59.674","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"799717f0-58a6-4f4f-a1df-050e24a1a6a2","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:32:59.674","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"799717f0-58a6-4f4f-a1df-050e24a1a6a2"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:32:59.674","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"130.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.685","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d8f6bee4-0044-4e19-bb33-66528af81390","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.685","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d8f6bee4-0044-4e19-bb33-66528af81390","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.685","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d8f6bee4-0044-4e19-bb33-66528af81390","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.685","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:13.686","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"d8f6bee4-0044-4e19-bb33-66528af81390"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:13.686","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"810.208µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.698","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"19b52bb6-ca73-46d7-ad56-12fc1d10d17c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.698","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"19b52bb6-ca73-46d7-ad56-12fc1d10d17c","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:13.698","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"19b52bb6-ca73-46d7-ad56-12fc1d10d17c","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:13.698","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"19b52bb6-ca73-46d7-ad56-12fc1d10d17c"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:13.698","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"325.375µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.629","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"fcf514e9-0f30-4c44-93bd-37b40d4a1dbc","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.629","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"fcf514e9-0f30-4c44-93bd-37b40d4a1dbc","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.629","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"fcf514e9-0f30-4c44-93bd-37b40d4a1dbc","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.630","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:44.630","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"fcf514e9-0f30-4c44-93bd-37b40d4a1dbc"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:44.630","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"818.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.641","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3ff2e938-a62d-422d-8c54-1e741acc8ca3","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.641","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3ff2e938-a62d-422d-8c54-1e741acc8ca3","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:33:44.641","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3ff2e938-a62d-422d-8c54-1e741acc8ca3","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:44.642","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"3ff2e938-a62d-422d-8c54-1e741acc8ca3"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:33:44.642","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"300µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.434","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"cb31b749-c426-49d0-89e6-8cf2b3135bec","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.434","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"cb31b749-c426-49d0-89e6-8cf2b3135bec","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.434","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"cb31b749-c426-49d0-89e6-8cf2b3135bec","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.435","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.435","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:31:39.841","access_count":2,"age":"2m28.594165s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.435","msg":"食譜推薦成功","service":"recipe-generator","request_id":"cb31b749-c426-49d0-89e6-8cf2b3135bec","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.435","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.438166ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.437","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f412619d-cd7c-45b4-904d-a2100bedb559","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.437","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f412619d-cd7c-45b4-904d-a2100bedb559","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:08.437","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f412619d-cd7c-45b4-904d-a2100bedb559","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:08.437","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"f412619d-cd7c-45b4-904d-a2100bedb559"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:08.437","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"259.916µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.119","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"582b74ce-edb8-4c8c-b521-bcc4909f0b07","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.120","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"582b74ce-edb8-4c8c-b521-bcc4909f0b07","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.120","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"582b74ce-edb8-4c8c-b521-bcc4909f0b07","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.120","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:14.120","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"582b74ce-edb8-4c8c-b521-bcc4909f0b07"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:14.120","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"785.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.132","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"fa801f26-d390-4a2b-af67-3436629156f3","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.132","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"fa801f26-d390-4a2b-af67-3436629156f3","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:14.132","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"fa801f26-d390-4a2b-af67-3436629156f3","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:14.132","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"fa801f26-d390-4a2b-af67-3436629156f3"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:14.132","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"416.917µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.638","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b07a0e67-6637-409c-93fb-a29489188610","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.638","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b07a0e67-6637-409c-93fb-a29489188610","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.638","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b07a0e67-6637-409c-93fb-a29489188610","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.638","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:20.639","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"b07a0e67-6637-409c-93fb-a29489188610"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:20.639","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"821.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.651","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"432b6367-a7eb-4d42-ab53-a57246115c6a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.651","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"432b6367-a7eb-4d42-ab53-a57246115c6a","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:20.651","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"432b6367-a7eb-4d42-ab53-a57246115c6a","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:20.651","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"432b6367-a7eb-4d42-ab53-a57246115c6a"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:20.651","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"385.208µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:34:21.298","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"69.959µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:34:21.310","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.861","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"78650a5f-ebdc-41ec-9032-47b1b03a8232","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.861","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"78650a5f-ebdc-41ec-9032-47b1b03a8232","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.861","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"78650a5f-ebdc-41ec-9032-47b1b03a8232","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.861","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:21.861","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"78650a5f-ebdc-41ec-9032-47b1b03a8232"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:21.861","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"394.584µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.873","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"43450377-023e-49a9-8f38-9cdfccd7843f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.873","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"43450377-023e-49a9-8f38-9cdfccd7843f","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:34:21.873","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"43450377-023e-49a9-8f38-9cdfccd7843f","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:21.873","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"43450377-023e-49a9-8f38-9cdfccd7843f"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:34:21.873","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"281.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:10.794","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:10.795","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:10.795","msg":"Cache manager closed","service":"recipe-generator","total_hits":2,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.392","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.393","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.393","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.393","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.393","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.394","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.394","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:23.394","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:26.464","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"213f680f-1843-4776-a04e-77ebf6c22f37","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:26.465","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"213f680f-1843-4776-a04e-77ebf6c22f37","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:26.465","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"213f680f-1843-4776-a04e-77ebf6c22f37","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:26.465","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:26.465","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.620","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:38:35.620","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.621","msg":"食譜推薦成功","service":"recipe-generator","request_id":"213f680f-1843-4776-a04e-77ebf6c22f37","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.621","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.157347125s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.630","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"277b8c4c-fa9f-4ce3-ab84-86f1eb413512","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.630","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"277b8c4c-fa9f-4ce3-ab84-86f1eb413512","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:35.630","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"277b8c4c-fa9f-4ce3-ab84-86f1eb413512","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:35.630","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"277b8c4c-fa9f-4ce3-ab84-86f1eb413512"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:35.630","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"415.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.714","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"9443b9b3-33ee-4de9-b477-efb8082098bc","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.714","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"9443b9b3-33ee-4de9-b477-efb8082098bc","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.714","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"9443b9b3-33ee-4de9-b477-efb8082098bc","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.714","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:36.714","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"9443b9b3-33ee-4de9-b477-efb8082098bc"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:36.714","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"307µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.727","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"6d2ace77-a21c-469b-b0fc-10506f2376cd","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.727","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"6d2ace77-a21c-469b-b0fc-10506f2376cd","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:36.727","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"6d2ace77-a21c-469b-b0fc-10506f2376cd","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:36.727","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"6d2ace77-a21c-469b-b0fc-10506f2376cd"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:36.727","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"106.625µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.919","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8d4358fa-80e7-4064-ba71-9c1b351ff899","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.919","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"8d4358fa-80e7-4064-ba71-9c1b351ff899","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.919","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"8d4358fa-80e7-4064-ba71-9c1b351ff899","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.919","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:37.919","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"8d4358fa-80e7-4064-ba71-9c1b351ff899"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:37.919","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"513.583µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.931","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"02aa4e39-0a2c-4ae0-bec3-a797c7c4b3d6","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.931","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"02aa4e39-0a2c-4ae0-bec3-a797c7c4b3d6","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:38:37.931","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"02aa4e39-0a2c-4ae0-bec3-a797c7c4b3d6","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:37.931","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"02aa4e39-0a2c-4ae0-bec3-a797c7c4b3d6"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:38:37.931","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"214.833µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:29.989","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:29.989","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:29.989","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.423","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.424","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:40.424","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:43.412","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d4a8ec3c-fd4e-4959-acaa-871a2fc35472","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:43.413","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d4a8ec3c-fd4e-4959-acaa-871a2fc35472","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:43.413","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d4a8ec3c-fd4e-4959-acaa-871a2fc35472","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:43.413","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:43.413","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.720","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:41:52.720","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.720","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d4a8ec3c-fd4e-4959-acaa-871a2fc35472","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.721","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.309180375s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.731","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"11a9c76a-b8ed-40d5-a66c-a02b88ecc071","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.731","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"11a9c76a-b8ed-40d5-a66c-a02b88ecc071","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:52.731","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"11a9c76a-b8ed-40d5-a66c-a02b88ecc071","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:52.731","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"11a9c76a-b8ed-40d5-a66c-a02b88ecc071"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:52.731","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"420.75µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.358","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"37c0ce55-f795-4560-a546-7d3c70390c9d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.358","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"37c0ce55-f795-4560-a546-7d3c70390c9d","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.358","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"37c0ce55-f795-4560-a546-7d3c70390c9d","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.358","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:54.358","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"37c0ce55-f795-4560-a546-7d3c70390c9d"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:54.358","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"437.666µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.371","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"6301ef48-b33f-4136-a41a-1c29e5c9a8c2","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.371","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"6301ef48-b33f-4136-a41a-1c29e5c9a8c2","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:54.371","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"6301ef48-b33f-4136-a41a-1c29e5c9a8c2","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:54.371","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"6301ef48-b33f-4136-a41a-1c29e5c9a8c2"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:54.371","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"274.708µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.371","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b1ee515c-c919-46dc-b2cd-1c658e94659a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.371","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b1ee515c-c919-46dc-b2cd-1c658e94659a","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.371","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b1ee515c-c919-46dc-b2cd-1c658e94659a","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.371","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:55.372","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"b1ee515c-c919-46dc-b2cd-1c658e94659a"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:55.372","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"425.708µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.384","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7423c46d-6696-453a-b698-0704c8bfc849","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.384","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"7423c46d-6696-453a-b698-0704c8bfc849","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:41:55.384","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"7423c46d-6696-453a-b698-0704c8bfc849","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:55.384","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"7423c46d-6696-453a-b698-0704c8bfc849"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:41:55.384","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"160.584µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:11.948","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:11.948","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:11.948","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.483","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:16.484","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:20.260","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8b84fdbf-3fc5-40d4-8f47-85b21c02f6d0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:20.260","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"8b84fdbf-3fc5-40d4-8f47-85b21c02f6d0","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:20.261","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"8b84fdbf-3fc5-40d4-8f47-85b21c02f6d0","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:20.261","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:20.261","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.030","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:46:34.030","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.031","msg":"食譜推薦成功","service":"recipe-generator","request_id":"8b84fdbf-3fc5-40d4-8f47-85b21c02f6d0","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.031","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"13.77146225s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.037","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"e78415c9-acf8-41db-a188-75cbafa80291","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.037","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"e78415c9-acf8-41db-a188-75cbafa80291","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:34.037","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"e78415c9-acf8-41db-a188-75cbafa80291","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:34.037","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"e78415c9-acf8-41db-a188-75cbafa80291"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:34.037","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"237.958µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.219","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ab38bc5e-b72a-41fb-8d98-5697eb2e98d1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.219","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ab38bc5e-b72a-41fb-8d98-5697eb2e98d1","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.219","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ab38bc5e-b72a-41fb-8d98-5697eb2e98d1","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.219","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:35.219","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"ab38bc5e-b72a-41fb-8d98-5697eb2e98d1"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:35.219","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"311µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.232","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"69e4fbd2-f30f-4f14-805f-a72e89b0e86e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.232","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"69e4fbd2-f30f-4f14-805f-a72e89b0e86e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:35.232","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"69e4fbd2-f30f-4f14-805f-a72e89b0e86e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:35.232","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"69e4fbd2-f30f-4f14-805f-a72e89b0e86e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:35.232","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"103.583µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.795","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"a43a8b9b-20c8-457c-a30c-20c08c929510","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.795","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"a43a8b9b-20c8-457c-a30c-20c08c929510","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.795","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"a43a8b9b-20c8-457c-a30c-20c08c929510","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.795","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:36.796","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"a43a8b9b-20c8-457c-a30c-20c08c929510"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:36.796","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"539.417µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.807","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"302479bc-d90e-4ae9-8781-b025b0f06710","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.807","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"302479bc-d90e-4ae9-8781-b025b0f06710","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:46:36.807","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"302479bc-d90e-4ae9-8781-b025b0f06710","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:36.807","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"302479bc-d90e-4ae9-8781-b025b0f06710"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:46:36.807","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"189.667µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:25.437","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:25.438","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:25.438","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:31.258","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:37.592","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"c184dec9-4b28-44b1-afe0-23a2351ec62b","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:37.593","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"c184dec9-4b28-44b1-afe0-23a2351ec62b","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:37.593","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"c184dec9-4b28-44b1-afe0-23a2351ec62b","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:37.593","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:37.593","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.501","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:49:45.501","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.502","msg":"食譜推薦成功","service":"recipe-generator","request_id":"c184dec9-4b28-44b1-afe0-23a2351ec62b","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.502","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.913762083s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.511","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"fb9e9e23-71ea-4d93-a544-19bb09dde01e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.511","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"fb9e9e23-71ea-4d93-a544-19bb09dde01e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:45.512","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"fb9e9e23-71ea-4d93-a544-19bb09dde01e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:45.512","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"fb9e9e23-71ea-4d93-a544-19bb09dde01e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:45.512","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"367.583µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.167","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"958d46fb-8fd2-4f8f-a511-b46f88d3e004","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.167","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"958d46fb-8fd2-4f8f-a511-b46f88d3e004","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.167","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"958d46fb-8fd2-4f8f-a511-b46f88d3e004","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.167","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:47.167","msg":"食譜推薦失敗","service":"recipe-generator","error":"AI service error: request rate limit exceeded","request_id":"958d46fb-8fd2-4f8f-a511-b46f88d3e004"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:47.167","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"428.625µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.181","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b3d2e8ba-b81d-40b7-b37c-a146e8c87d3e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.181","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b3d2e8ba-b81d-40b7-b37c-a146e8c87d3e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:49:47.181","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b3d2e8ba-b81d-40b7-b37c-a146e8c87d3e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:47.181","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"b3d2e8ba-b81d-40b7-b37c-a146e8c87d3e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:49:47.181","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"333.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:49:48.043","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"49µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:49:48.055","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.166µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:39.747","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:39.747","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:39.747","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.757","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:45.758","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:51.195","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"def4ec64-9212-4c83-9bea-0869cc1ae251","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:51.196","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"def4ec64-9212-4c83-9bea-0869cc1ae251","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:51.196","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"def4ec64-9212-4c83-9bea-0869cc1ae251","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:51.196","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:51.196","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.910","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.910","msg":"食譜推薦成功","service":"recipe-generator","request_id":"def4ec64-9212-4c83-9bea-0869cc1ae251","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.911","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.715799125s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.919","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3c2828fd-e36e-400c-b8be-7174205f5ead","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.920","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3c2828fd-e36e-400c-b8be-7174205f5ead","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:51:59.920","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3c2828fd-e36e-400c-b8be-7174205f5ead","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:51:59.920","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"3c2828fd-e36e-400c-b8be-7174205f5ead"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:51:59.920","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"434.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.553","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"09eb0a45-2741-4370-9518-4c0286e9e8fe","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.554","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"09eb0a45-2741-4370-9518-4c0286e9e8fe","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.554","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"09eb0a45-2741-4370-9518-4c0286e9e8fe","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.554","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.554","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":1,"age":"1.644792708s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.555","msg":"食譜推薦成功","service":"recipe-generator","request_id":"09eb0a45-2741-4370-9518-4c0286e9e8fe","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.555","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.674458ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.556","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"821c0b3d-4082-4322-ab71-06c2831fceed","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.557","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"821c0b3d-4082-4322-ab71-06c2831fceed","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:01.557","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"821c0b3d-4082-4322-ab71-06c2831fceed","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:01.557","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"821c0b3d-4082-4322-ab71-06c2831fceed"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:01.557","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"353.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.407","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"bc1a675d-c509-428a-8710-914aabfefd9e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.407","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"bc1a675d-c509-428a-8710-914aabfefd9e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.407","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"bc1a675d-c509-428a-8710-914aabfefd9e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.408","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.408","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":2,"age":"3.498169916s","hit_ratio":0.6666666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.408","msg":"食譜推薦成功","service":"recipe-generator","request_id":"bc1a675d-c509-428a-8710-914aabfefd9e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.408","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.309458ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.410","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"da446019-448d-41ea-be8e-39d891695e7e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.410","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"da446019-448d-41ea-be8e-39d891695e7e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:03.410","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"da446019-448d-41ea-be8e-39d891695e7e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:03.410","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"da446019-448d-41ea-be8e-39d891695e7e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:03.410","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"211.042µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:03.995","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"49.667µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:04.008","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"49.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.518","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"12f1a417-196a-4601-adb2-7d0dc9b54a70","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.518","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"12f1a417-196a-4601-adb2-7d0dc9b54a70","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.518","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"12f1a417-196a-4601-adb2-7d0dc9b54a70","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.519","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.519","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":3,"age":"4.609784708s","hit_ratio":0.75}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.520","msg":"食譜推薦成功","service":"recipe-generator","request_id":"12f1a417-196a-4601-adb2-7d0dc9b54a70","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.520","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.772958ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.521","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"01618050-87b2-472a-8349-30bb9abdbd2a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.521","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"01618050-87b2-472a-8349-30bb9abdbd2a","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:04.521","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"01618050-87b2-472a-8349-30bb9abdbd2a","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:04.521","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"01618050-87b2-472a-8349-30bb9abdbd2a"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:04.522","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"130.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:05.135","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"69.25µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:05.148","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"43µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.691","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"9ea26cc9-fc38-4837-8f3f-47d531cd6572","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.691","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"9ea26cc9-fc38-4837-8f3f-47d531cd6572","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.691","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"9ea26cc9-fc38-4837-8f3f-47d531cd6572","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.691","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.691","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":4,"age":"5.781771s","hit_ratio":0.8}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.692","msg":"食譜推薦成功","service":"recipe-generator","request_id":"9ea26cc9-fc38-4837-8f3f-47d531cd6572","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.692","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"878.833µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.694","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"43c9ca63-a743-4a96-af8d-d36c0d79286a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.694","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"43c9ca63-a743-4a96-af8d-d36c0d79286a","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:05.694","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"43c9ca63-a743-4a96-af8d-d36c0d79286a","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:05.694","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"43c9ca63-a743-4a96-af8d-d36c0d79286a"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:05.694","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"237µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:06.185","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"34.708µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:06.197","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"48.917µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.722","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b9c822f1-649b-4380-b9c0-ba2e97c9c4e6","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.722","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b9c822f1-649b-4380-b9c0-ba2e97c9c4e6","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.723","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b9c822f1-649b-4380-b9c0-ba2e97c9c4e6","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.723","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.724","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":5,"age":"6.814044791s","hit_ratio":0.8333333333333334}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.724","msg":"食譜推薦成功","service":"recipe-generator","request_id":"b9c822f1-649b-4380-b9c0-ba2e97c9c4e6","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.724","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.845333ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.726","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"57c12083-6aa2-4c66-92c2-076795a695d0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.726","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"57c12083-6aa2-4c66-92c2-076795a695d0","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:06.726","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"57c12083-6aa2-4c66-92c2-076795a695d0","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:06.726","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"57c12083-6aa2-4c66-92c2-076795a695d0"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:06.726","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"136.292µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.809","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"31201fbd-4fc0-4651-9a1c-8b22ee65c12c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"31201fbd-4fc0-4651-9a1c-8b22ee65c12c","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"31201fbd-4fc0-4651-9a1c-8b22ee65c12c","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":6,"age":"15.900606166s","hit_ratio":0.8571428571428571}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"食譜推薦成功","service":"recipe-generator","request_id":"31201fbd-4fc0-4651-9a1c-8b22ee65c12c","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.810","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.232334ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.812","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ba7a26a6-fe42-4073-9d10-502dd2323d2c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.812","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ba7a26a6-fe42-4073-9d10-502dd2323d2c","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:15.812","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ba7a26a6-fe42-4073-9d10-502dd2323d2c","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:15.812","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ba7a26a6-fe42-4073-9d10-502dd2323d2c"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:15.812","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"253.792µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.380","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"051afed5-3e03-4803-b72e-b3e3dd05078d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.380","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"051afed5-3e03-4803-b72e-b3e3dd05078d","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.380","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"051afed5-3e03-4803-b72e-b3e3dd05078d","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.380","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.381","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":7,"age":"19.470925666s","hit_ratio":0.875}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.381","msg":"食譜推薦成功","service":"recipe-generator","request_id":"051afed5-3e03-4803-b72e-b3e3dd05078d","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.381","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.06275ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.383","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"91a0d647-b2f6-4c36-b6c6-4c380c83762c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.383","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"91a0d647-b2f6-4c36-b6c6-4c380c83762c","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:19.383","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"91a0d647-b2f6-4c36-b6c6-4c380c83762c","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:19.383","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"91a0d647-b2f6-4c36-b6c6-4c380c83762c"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:19.383","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"266.709µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ca7990a3-255a-497c-9c9b-bcd44a70810a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ca7990a3-255a-497c-9c9b-bcd44a70810a","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ca7990a3-255a-497c-9c9b-bcd44a70810a","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":8,"age":"22.146859791s","hit_ratio":0.8888888888888888}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.056","msg":"食譜推薦成功","service":"recipe-generator","request_id":"ca7990a3-255a-497c-9c9b-bcd44a70810a","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.057","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"365.334µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.058","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"71a963e2-c3a2-4c09-8408-bffbcaf49197","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.058","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"71a963e2-c3a2-4c09-8408-bffbcaf49197","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:22.058","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"71a963e2-c3a2-4c09-8408-bffbcaf49197","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:22.058","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"71a963e2-c3a2-4c09-8408-bffbcaf49197"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:22.058","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"66.083µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.680","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"1c569263-6258-4815-a557-bf703911c2b5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.680","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"1c569263-6258-4815-a557-bf703911c2b5","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.680","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"1c569263-6258-4815-a557-bf703911c2b5","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.680","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.680","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":9,"age":"25.770792s","hit_ratio":0.9}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.681","msg":"食譜推薦成功","service":"recipe-generator","request_id":"1c569263-6258-4815-a557-bf703911c2b5","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.681","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.050958ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.683","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b9e92999-b25d-4a37-bbcb-cda24d550990","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.683","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b9e92999-b25d-4a37-bbcb-cda24d550990","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:25.683","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b9e92999-b25d-4a37-bbcb-cda24d550990","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:25.683","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"b9e92999-b25d-4a37-bbcb-cda24d550990"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:25.683","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"131.458µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.686","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"6ecbb64e-6d28-4322-8fbd-2c1a29d12af1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.686","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"6ecbb64e-6d28-4322-8fbd-2c1a29d12af1","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.686","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"6ecbb64e-6d28-4322-8fbd-2c1a29d12af1","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.686","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.687","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":10,"age":"26.777032208s","hit_ratio":0.9090909090909091}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.687","msg":"食譜推薦成功","service":"recipe-generator","request_id":"6ecbb64e-6d28-4322-8fbd-2c1a29d12af1","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.687","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"543.625µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.688","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"baedcd9f-9a56-4dd2-a16b-ecb5a6891f38","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.688","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"baedcd9f-9a56-4dd2-a16b-ecb5a6891f38","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:26.688","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"baedcd9f-9a56-4dd2-a16b-ecb5a6891f38","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:26.688","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"baedcd9f-9a56-4dd2-a16b-ecb5a6891f38"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:26.688","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"113.75µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:27.553","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"32.917µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:27.565","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"61µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.582","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"6dc4e402-fb91-4248-9677-bc9fced1ce7e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.582","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"6dc4e402-fb91-4248-9677-bc9fced1ce7e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.582","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"6dc4e402-fb91-4248-9677-bc9fced1ce7e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.582","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.583","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":11,"age":"28.672994541s","hit_ratio":0.9166666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.583","msg":"食譜推薦成功","service":"recipe-generator","request_id":"6dc4e402-fb91-4248-9677-bc9fced1ce7e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.583","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"584.417µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.584","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"75e16611-7e18-43b8-adb5-0685b066f4f1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.584","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"75e16611-7e18-43b8-adb5-0685b066f4f1","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:28.584","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"75e16611-7e18-43b8-adb5-0685b066f4f1","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:28.585","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"75e16611-7e18-43b8-adb5-0685b066f4f1"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:28.585","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"167.792µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:29.320","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"63.042µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:29.332","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"40.458µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7474c986-3f5a-447d-83ab-9a4f41700269","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"7474c986-3f5a-447d-83ab-9a4f41700269","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"7474c986-3f5a-447d-83ab-9a4f41700269","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":12,"age":"30.646462333s","hit_ratio":0.9230769230769231}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"食譜推薦成功","service":"recipe-generator","request_id":"7474c986-3f5a-447d-83ab-9a4f41700269","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.556","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"759.709µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.558","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"29ac440e-fb81-4b7c-bc99-1430b2e6347e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.558","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"29ac440e-fb81-4b7c-bc99-1430b2e6347e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:30.558","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"29ac440e-fb81-4b7c-bc99-1430b2e6347e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:30.558","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"29ac440e-fb81-4b7c-bc99-1430b2e6347e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:30.558","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"269.417µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.834","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"56a7fa35-1664-4e8a-bba9-5d2f17581a53","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.834","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"56a7fa35-1664-4e8a-bba9-5d2f17581a53","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.834","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"56a7fa35-1664-4e8a-bba9-5d2f17581a53","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.834","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.835","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":13,"age":"32.925043208s","hit_ratio":0.9285714285714286}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.835","msg":"食譜推薦成功","service":"recipe-generator","request_id":"56a7fa35-1664-4e8a-bba9-5d2f17581a53","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.835","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"579.333µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.836","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"2159fc3a-cce5-4f6e-aca5-3630f5579ca1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.836","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"2159fc3a-cce5-4f6e-aca5-3630f5579ca1","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:32.836","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"2159fc3a-cce5-4f6e-aca5-3630f5579ca1","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:32.836","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"2159fc3a-cce5-4f6e-aca5-3630f5579ca1"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:32.836","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"118.25µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.450","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d3c9ebae-1beb-4c21-bf36-386ac2107fdf","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.450","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d3c9ebae-1beb-4c21-bf36-386ac2107fdf","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.450","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d3c9ebae-1beb-4c21-bf36-386ac2107fdf","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.450","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.451","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":14,"age":"34.541049s","hit_ratio":0.9333333333333333}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.451","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d3c9ebae-1beb-4c21-bf36-386ac2107fdf","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.451","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"856.917µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.453","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5ac45128-62f0-444c-ad2b-3a056c362cc7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.453","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5ac45128-62f0-444c-ad2b-3a056c362cc7","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:34.453","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5ac45128-62f0-444c-ad2b-3a056c362cc7","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:34.453","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"5ac45128-62f0-444c-ad2b-3a056c362cc7"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:34.453","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"296.792µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.890","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"729df07d-2ebf-4360-8c2e-e58ad4ce3ff5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.890","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"729df07d-2ebf-4360-8c2e-e58ad4ce3ff5","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.890","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"729df07d-2ebf-4360-8c2e-e58ad4ce3ff5","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.891","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.891","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":15,"age":"35.98112225s","hit_ratio":0.9375}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.891","msg":"食譜推薦成功","service":"recipe-generator","request_id":"729df07d-2ebf-4360-8c2e-e58ad4ce3ff5","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.891","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"665.917µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.893","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"85216c30-7bd9-4128-a35b-744404345c9e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.893","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"85216c30-7bd9-4128-a35b-744404345c9e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:35.893","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"85216c30-7bd9-4128-a35b-744404345c9e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:35.893","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"85216c30-7bd9-4128-a35b-744404345c9e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:35.893","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"298.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"453da80a-f04f-47d1-841e-060f670111a5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"453da80a-f04f-47d1-841e-060f670111a5","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"453da80a-f04f-47d1-841e-060f670111a5","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":16,"age":"37.069706708s","hit_ratio":0.9411764705882353}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"食譜推薦成功","service":"recipe-generator","request_id":"453da80a-f04f-47d1-841e-060f670111a5","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.979","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"375.25µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.981","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ad9c23fa-26cd-4477-8a50-fcf540a5d2dc","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.981","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ad9c23fa-26cd-4477-8a50-fcf540a5d2dc","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:36.981","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ad9c23fa-26cd-4477-8a50-fcf540a5d2dc","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:36.981","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ad9c23fa-26cd-4477-8a50-fcf540a5d2dc"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:36.981","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"178.25µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.022","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"20a19a1a-e963-4614-ad75-e5eeda03e4f6","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.022","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"20a19a1a-e963-4614-ad75-e5eeda03e4f6","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.023","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"20a19a1a-e963-4614-ad75-e5eeda03e4f6","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.023","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.023","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":17,"age":"38.11343575s","hit_ratio":0.9444444444444444}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.023","msg":"食譜推薦成功","service":"recipe-generator","request_id":"20a19a1a-e963-4614-ad75-e5eeda03e4f6","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.023","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.0435ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.025","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ccceecef-772e-48b1-8420-58d3ae3724b6","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.025","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ccceecef-772e-48b1-8420-58d3ae3724b6","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:38.025","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ccceecef-772e-48b1-8420-58d3ae3724b6","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:38.025","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ccceecef-772e-48b1-8420-58d3ae3724b6"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:38.025","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"147.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:38.566","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"79.917µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:38.578","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"54.25µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.587","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"1e1eb97b-90b8-44a2-b68c-db7b92e6f2ff","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.587","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"1e1eb97b-90b8-44a2-b68c-db7b92e6f2ff","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.587","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"1e1eb97b-90b8-44a2-b68c-db7b92e6f2ff","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.587","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.587","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":18,"age":"40.677878625s","hit_ratio":0.9473684210526315}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.588","msg":"食譜推薦成功","service":"recipe-generator","request_id":"1e1eb97b-90b8-44a2-b68c-db7b92e6f2ff","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.588","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"681.75µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.589","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f14e44d7-a3f3-433e-81ef-6f69f9cedf09","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.589","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f14e44d7-a3f3-433e-81ef-6f69f9cedf09","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:40.589","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f14e44d7-a3f3-433e-81ef-6f69f9cedf09","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:40.589","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"f14e44d7-a3f3-433e-81ef-6f69f9cedf09"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:40.589","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"173.709µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:41.333","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.75µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:41.345","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"30.292µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.135","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4248067a-8f30-4ee0-b926-5fb1dc5fd5ed","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.135","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"4248067a-8f30-4ee0-b926-5fb1dc5fd5ed","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.135","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"4248067a-8f30-4ee0-b926-5fb1dc5fd5ed","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.135","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.136","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":19,"age":"42.22613025s","hit_ratio":0.95}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.136","msg":"食譜推薦成功","service":"recipe-generator","request_id":"4248067a-8f30-4ee0-b926-5fb1dc5fd5ed","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.136","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.284708ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.138","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"90c39cb9-6352-44bd-ad12-4b03d5bc35e3","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.138","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"90c39cb9-6352-44bd-ad12-4b03d5bc35e3","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:42.138","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"90c39cb9-6352-44bd-ad12-4b03d5bc35e3","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:42.138","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"90c39cb9-6352-44bd-ad12-4b03d5bc35e3"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:42.138","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"200.542µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:42.632","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"43.666µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:42.643","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"52.333µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.521","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"93438ff5-5198-4818-8839-07cb1cbd4e3e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.521","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"93438ff5-5198-4818-8839-07cb1cbd4e3e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.521","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"93438ff5-5198-4818-8839-07cb1cbd4e3e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.522","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.522","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":20,"age":"45.612290083s","hit_ratio":0.9523809523809523}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.522","msg":"食譜推薦成功","service":"recipe-generator","request_id":"93438ff5-5198-4818-8839-07cb1cbd4e3e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.522","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"999.875µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.524","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d2f06559-f11a-4d00-b508-f91f44030085","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.524","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d2f06559-f11a-4d00-b508-f91f44030085","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:45.524","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d2f06559-f11a-4d00-b508-f91f44030085","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:45.524","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"d2f06559-f11a-4d00-b508-f91f44030085"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:45.524","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"247.917µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.811","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"98f4e973-e3d9-4179-a6a4-585b3f0266ff","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"98f4e973-e3d9-4179-a6a4-585b3f0266ff","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"98f4e973-e3d9-4179-a6a4-585b3f0266ff","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":21,"age":"46.902324208s","hit_ratio":0.9545454545454546}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"食譜推薦成功","service":"recipe-generator","request_id":"98f4e973-e3d9-4179-a6a4-585b3f0266ff","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.812","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"547µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.814","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"947c7446-edee-493d-99ef-2e75f72d8007","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.814","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"947c7446-edee-493d-99ef-2e75f72d8007","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:46.814","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"947c7446-edee-493d-99ef-2e75f72d8007","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:46.814","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"947c7446-edee-493d-99ef-2e75f72d8007"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:46.814","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"118.333µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.969","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5566fec6-7ffc-4579-9cba-e9659eb23ce9","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5566fec6-7ffc-4579-9cba-e9659eb23ce9","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5566fec6-7ffc-4579-9cba-e9659eb23ce9","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":22,"age":"48.060587208s","hit_ratio":0.9565217391304348}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"食譜推薦成功","service":"recipe-generator","request_id":"5566fec6-7ffc-4579-9cba-e9659eb23ce9","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.970","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.00275ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.972","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"81ab1c3e-5f64-4c1a-b9c9-27c14de5b3a2","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.972","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"81ab1c3e-5f64-4c1a-b9c9-27c14de5b3a2","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:47.972","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"81ab1c3e-5f64-4c1a-b9c9-27c14de5b3a2","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:47.972","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"81ab1c3e-5f64-4c1a-b9c9-27c14de5b3a2"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:47.972","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"238.666µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4c583e5c-1034-431f-8371-2cb7e3b22083","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"4c583e5c-1034-431f-8371-2cb7e3b22083","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"4c583e5c-1034-431f-8371-2cb7e3b22083","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":23,"age":"49.125482125s","hit_ratio":0.9583333333333334}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"食譜推薦成功","service":"recipe-generator","request_id":"4c583e5c-1034-431f-8371-2cb7e3b22083","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.035","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"765.5µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.037","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ed71138b-a17a-4290-b02f-162a10c5e378","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.037","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ed71138b-a17a-4290-b02f-162a10c5e378","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:49.037","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ed71138b-a17a-4290-b02f-162a10c5e378","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:49.037","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ed71138b-a17a-4290-b02f-162a10c5e378"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:49.037","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"237µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.174","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"85b544b0-043a-4d73-9fea-cec59f63fa79","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.174","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"85b544b0-043a-4d73-9fea-cec59f63fa79","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.174","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"85b544b0-043a-4d73-9fea-cec59f63fa79","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.174","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.174","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":24,"age":"50.264934666s","hit_ratio":0.96}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.175","msg":"食譜推薦成功","service":"recipe-generator","request_id":"85b544b0-043a-4d73-9fea-cec59f63fa79","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.175","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"713.792µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.176","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"a51b5e7b-cdb6-4723-a892-ef00f85fb6a5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.176","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"a51b5e7b-cdb6-4723-a892-ef00f85fb6a5","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:50.176","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"a51b5e7b-cdb6-4723-a892-ef00f85fb6a5","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:50.176","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"a51b5e7b-cdb6-4723-a892-ef00f85fb6a5"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:50.176","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"125.334µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.238","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"44f6209c-4818-4e08-972d-bdd92026f189","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.238","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"44f6209c-4818-4e08-972d-bdd92026f189","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.239","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"44f6209c-4818-4e08-972d-bdd92026f189","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.239","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.239","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":25,"age":"51.329550166s","hit_ratio":0.9615384615384616}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.239","msg":"食譜推薦成功","service":"recipe-generator","request_id":"44f6209c-4818-4e08-972d-bdd92026f189","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.239","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.199208ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.241","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b7c33561-24fe-4f78-a77f-82db69703217","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.241","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b7c33561-24fe-4f78-a77f-82db69703217","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:51.241","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b7c33561-24fe-4f78-a77f-82db69703217","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:51.241","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"b7c33561-24fe-4f78-a77f-82db69703217"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:51.241","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"246.708µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.341","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"0cbbe5c0-3197-4db0-8b98-7355d153bea8","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.341","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"0cbbe5c0-3197-4db0-8b98-7355d153bea8","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.341","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"0cbbe5c0-3197-4db0-8b98-7355d153bea8","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.341","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.342","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":26,"age":"52.432254875s","hit_ratio":0.9629629629629629}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.342","msg":"食譜推薦成功","service":"recipe-generator","request_id":"0cbbe5c0-3197-4db0-8b98-7355d153bea8","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.342","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.271625ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.344","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"65c84ec1-19a4-4ff9-ae1a-d5c4482e543b","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.344","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"65c84ec1-19a4-4ff9-ae1a-d5c4482e543b","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:52.344","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"65c84ec1-19a4-4ff9-ae1a-d5c4482e543b","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:52.344","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"65c84ec1-19a4-4ff9-ae1a-d5c4482e543b"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:52.344","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"161.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.402","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f033f7dd-b3c0-4697-8baf-e88b64041659","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.402","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f033f7dd-b3c0-4697-8baf-e88b64041659","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.402","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f033f7dd-b3c0-4697-8baf-e88b64041659","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.402","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.403","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":27,"age":"53.493510375s","hit_ratio":0.9642857142857143}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.403","msg":"食譜推薦成功","service":"recipe-generator","request_id":"f033f7dd-b3c0-4697-8baf-e88b64041659","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.404","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.994667ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.405","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"cc4dcc3c-6f7a-46a6-bd65-35af6e2c8e74","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.405","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"cc4dcc3c-6f7a-46a6-bd65-35af6e2c8e74","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:53.405","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"cc4dcc3c-6f7a-46a6-bd65-35af6e2c8e74","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:53.405","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"cc4dcc3c-6f7a-46a6-bd65-35af6e2c8e74"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:53.405","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"154.541µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:54.152","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.917µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:54.164","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"45.5µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"e72502ef-0f62-4213-a6ce-01732c34c143","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"e72502ef-0f62-4213-a6ce-01732c34c143","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"e72502ef-0f62-4213-a6ce-01732c34c143","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":28,"age":"54.646807333s","hit_ratio":0.9655172413793104}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.556","msg":"食譜推薦成功","service":"recipe-generator","request_id":"e72502ef-0f62-4213-a6ce-01732c34c143","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.557","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"614.167µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.558","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"2525614f-9c56-4e90-9cd9-a17d89ea7aa2","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.558","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"2525614f-9c56-4e90-9cd9-a17d89ea7aa2","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:54.558","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"2525614f-9c56-4e90-9cd9-a17d89ea7aa2","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:54.558","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"2525614f-9c56-4e90-9cd9-a17d89ea7aa2"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:54.558","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"118.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:55.116","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.209µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:55.129","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"30.167µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:55.521","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"31.542µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:55.533","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"71.417µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f468ad9d-34eb-4277-8d3e-f4d07d78f8c0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f468ad9d-34eb-4277-8d3e-f4d07d78f8c0","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f468ad9d-34eb-4277-8d3e-f4d07d78f8c0","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":29,"age":"56.079849041s","hit_ratio":0.9666666666666667}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.989","msg":"食譜推薦成功","service":"recipe-generator","request_id":"f468ad9d-34eb-4277-8d3e-f4d07d78f8c0","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.990","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"996.875µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.991","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"58eff9d6-dac6-4a5a-865f-5919d8d0ec51","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.991","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"58eff9d6-dac6-4a5a-865f-5919d8d0ec51","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:55.991","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"58eff9d6-dac6-4a5a-865f-5919d8d0ec51","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:55.991","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"58eff9d6-dac6-4a5a-865f-5919d8d0ec51"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:55.991","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"127.958µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:56.392","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"47.625µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:56.404","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"54.166µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:56.790","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"55.334µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:56.802","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"40.459µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.134","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"cc4f82c1-e19d-4704-ab8a-ea33986b7e84","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.134","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"cc4f82c1-e19d-4704-ab8a-ea33986b7e84","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.134","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"cc4f82c1-e19d-4704-ab8a-ea33986b7e84","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.134","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.134","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":30,"age":"57.224978s","hit_ratio":0.967741935483871}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.135","msg":"食譜推薦成功","service":"recipe-generator","request_id":"cc4f82c1-e19d-4704-ab8a-ea33986b7e84","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.135","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"662.5µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.136","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b9c2085d-9947-4edd-8d3e-a55dee4334b4","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.136","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b9c2085d-9947-4edd-8d3e-a55dee4334b4","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:57.136","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b9c2085d-9947-4edd-8d3e-a55dee4334b4","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:57.136","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"b9c2085d-9947-4edd-8d3e-a55dee4334b4"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:57.136","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"177.209µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:52:57.486","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"31.334µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.690","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f8c0c73f-ba38-47c7-b686-33fb4999a97e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.690","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f8c0c73f-ba38-47c7-b686-33fb4999a97e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.690","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f8c0c73f-ba38-47c7-b686-33fb4999a97e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.690","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.691","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":31,"age":"58.781263875s","hit_ratio":0.96875}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.691","msg":"食譜推薦成功","service":"recipe-generator","request_id":"f8c0c73f-ba38-47c7-b686-33fb4999a97e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.691","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.225375ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.693","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"04653880-d8ef-4f7e-a3e3-48e3d347fc54","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.693","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"04653880-d8ef-4f7e-a3e3-48e3d347fc54","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:58.693","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"04653880-d8ef-4f7e-a3e3-48e3d347fc54","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:58.693","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"04653880-d8ef-4f7e-a3e3-48e3d347fc54"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:58.693","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"166.083µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.858","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"714a3352-cd53-40c2-9d7e-3189daf86c78","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.858","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"714a3352-cd53-40c2-9d7e-3189daf86c78","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.858","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"714a3352-cd53-40c2-9d7e-3189daf86c78","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.858","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.859","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":32,"age":"59.9491235s","hit_ratio":0.9696969696969697}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.859","msg":"食譜推薦成功","service":"recipe-generator","request_id":"714a3352-cd53-40c2-9d7e-3189daf86c78","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.859","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.228209ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.861","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"94372822-1be7-4c37-b6e5-e8b64eb75f3e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.861","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"94372822-1be7-4c37-b6e5-e8b64eb75f3e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:52:59.861","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"94372822-1be7-4c37-b6e5-e8b64eb75f3e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:59.861","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"94372822-1be7-4c37-b6e5-e8b64eb75f3e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:52:59.861","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"226.292µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:00.020","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"29.75µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:00.032","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.292µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:00.461","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"32µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:00.473","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"54.417µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d78fad0a-0b97-4040-b18e-648978a751d4","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d78fad0a-0b97-4040-b18e-648978a751d4","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d78fad0a-0b97-4040-b18e-648978a751d4","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":33,"age":"1m1.193718666s","hit_ratio":0.9705882352941176}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d78fad0a-0b97-4040-b18e-648978a751d4","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.103","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"530.792µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.106","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"680de4ad-5c0c-47cf-87e3-e0e1536ba226","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.106","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"680de4ad-5c0c-47cf-87e3-e0e1536ba226","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:01.106","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"680de4ad-5c0c-47cf-87e3-e0e1536ba226","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:01.106","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"680de4ad-5c0c-47cf-87e3-e0e1536ba226"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:01.106","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"167.667µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:01.364","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"48.542µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:01.376","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"50.458µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:02.066","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"33.458µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:02.079","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"33.333µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.438","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"006b5f48-4170-445d-8a41-8217bc62e80e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.438","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"006b5f48-4170-445d-8a41-8217bc62e80e","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.438","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"006b5f48-4170-445d-8a41-8217bc62e80e","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.438","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.439","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":34,"age":"1m2.529086291s","hit_ratio":0.9714285714285714}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.439","msg":"食譜推薦成功","service":"recipe-generator","request_id":"006b5f48-4170-445d-8a41-8217bc62e80e","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.439","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.231209ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.441","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"1feaec63-7f08-4f0f-a99c-989c54fa5475","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.441","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"1feaec63-7f08-4f0f-a99c-989c54fa5475","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:02.441","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"1feaec63-7f08-4f0f-a99c-989c54fa5475","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:02.441","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"1feaec63-7f08-4f0f-a99c-989c54fa5475"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:02.441","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"161.333µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:02.971","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"30.459µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:02.984","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"41.959µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.475","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d14279c4-d540-485b-ae67-8625025aa8bb","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.475","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d14279c4-d540-485b-ae67-8625025aa8bb","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.475","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d14279c4-d540-485b-ae67-8625025aa8bb","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.475","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.476","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":35,"age":"1m3.566111083s","hit_ratio":0.9722222222222222}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.476","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d14279c4-d540-485b-ae67-8625025aa8bb","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.476","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"580.458µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.478","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"62dc72a8-a65c-4a77-b703-90801be376e4","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.478","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"62dc72a8-a65c-4a77-b703-90801be376e4","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:03.478","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"62dc72a8-a65c-4a77-b703-90801be376e4","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:03.478","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"62dc72a8-a65c-4a77-b703-90801be376e4"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:03.478","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"153.042µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:03.971","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"49.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:03.983","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"43.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.132","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d8194adf-9f27-4ec9-bcc7-36dd843f0b4f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.132","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d8194adf-9f27-4ec9-bcc7-36dd843f0b4f","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.133","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d8194adf-9f27-4ec9-bcc7-36dd843f0b4f","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.133","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.133","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:51:59.910","access_count":36,"age":"1m18.223550208s","hit_ratio":0.972972972972973}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.133","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d8194adf-9f27-4ec9-bcc7-36dd843f0b4f","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.133","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.05675ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.135","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7d4ff333-b11a-4d91-8521-1beb0b2db4e8","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.135","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"7d4ff333-b11a-4d91-8521-1beb0b2db4e8","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:53:18.135","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"7d4ff333-b11a-4d91-8521-1beb0b2db4e8","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:18.135","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"7d4ff333-b11a-4d91-8521-1beb0b2db4e8"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:53:18.135","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"163.541µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:18.870","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"55.209µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:53:18.882","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"42.875µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:57:58.603","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:57:58.603","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:57:58.603","msg":"Cache manager closed","service":"recipe-generator","total_hits":36,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.643","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:04.644","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:23.105","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3cd5b463-8d15-42cd-89d0-621a4edea06a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:23.105","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3cd5b463-8d15-42cd-89d0-621a4edea06a","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:23.105","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3cd5b463-8d15-42cd-89d0-621a4edea06a","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:23.105","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:23.105","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.110","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.110","msg":"食譜推薦成功","service":"recipe-generator","request_id":"3cd5b463-8d15-42cd-89d0-621a4edea06a","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.111","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.006293792s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.117","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"056c10b6-bba7-4daa-ad13-4cf0c744aabb","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.117","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"056c10b6-bba7-4daa-ad13-4cf0c744aabb","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:31.117","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"056c10b6-bba7-4daa-ad13-4cf0c744aabb","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:31.117","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"056c10b6-bba7-4daa-ad13-4cf0c744aabb"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:31.117","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"128.5µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.426","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"9739e880-1acf-48d3-82d5-a4baccee71fd","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.426","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"9739e880-1acf-48d3-82d5-a4baccee71fd","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.426","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"9739e880-1acf-48d3-82d5-a4baccee71fd","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.426","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.427","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":1,"age":"2.316386583s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.427","msg":"食譜推薦成功","service":"recipe-generator","request_id":"9739e880-1acf-48d3-82d5-a4baccee71fd","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.427","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.235875ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.429","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5c0bf46a-5f8d-463a-b704-9d720b51ec4c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.429","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5c0bf46a-5f8d-463a-b704-9d720b51ec4c","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:33.429","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5c0bf46a-5f8d-463a-b704-9d720b51ec4c","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:33.429","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"5c0bf46a-5f8d-463a-b704-9d720b51ec4c"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:33.429","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"238.666µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.559","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5a0a8767-908c-43f9-af27-abe16e01e18c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.559","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5a0a8767-908c-43f9-af27-abe16e01e18c","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.559","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5a0a8767-908c-43f9-af27-abe16e01e18c","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.559","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.560","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":2,"age":"3.449272875s","hit_ratio":0.6666666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.560","msg":"食譜推薦成功","service":"recipe-generator","request_id":"5a0a8767-908c-43f9-af27-abe16e01e18c","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.560","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.295958ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.562","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"0bdbe16a-cc51-42af-9681-9f2f61fd95f0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.562","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"0bdbe16a-cc51-42af-9681-9f2f61fd95f0","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:34.562","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"0bdbe16a-cc51-42af-9681-9f2f61fd95f0","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:34.562","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"0bdbe16a-cc51-42af-9681-9f2f61fd95f0"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:34.562","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"270.917µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.368","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d7d13eee-42c3-41a6-a00d-d795165e3728","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.368","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d7d13eee-42c3-41a6-a00d-d795165e3728","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.368","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d7d13eee-42c3-41a6-a00d-d795165e3728","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.368","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.369","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":3,"age":"4.258384083s","hit_ratio":0.75}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.369","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d7d13eee-42c3-41a6-a00d-d795165e3728","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.369","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"584.917µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.371","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"16d51359-32ee-4a9e-8d48-33d9a035929f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.371","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"16d51359-32ee-4a9e-8d48-33d9a035929f","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:35.371","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"16d51359-32ee-4a9e-8d48-33d9a035929f","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:35.371","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"16d51359-32ee-4a9e-8d48-33d9a035929f"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:35.371","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"222.292µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.032","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5a38a751-10b8-4c88-a3fe-3f34d9c0cd54","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.032","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"5a38a751-10b8-4c88-a3fe-3f34d9c0cd54","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.032","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"5a38a751-10b8-4c88-a3fe-3f34d9c0cd54","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.032","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.033","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":4,"age":"4.922942958s","hit_ratio":0.8}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.034","msg":"食譜推薦成功","service":"recipe-generator","request_id":"5a38a751-10b8-4c88-a3fe-3f34d9c0cd54","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.034","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.986083ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.035","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"bc1826ac-bf9b-4355-9eaf-1d874e9e50b7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.035","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"bc1826ac-bf9b-4355-9eaf-1d874e9e50b7","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.035","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"bc1826ac-bf9b-4355-9eaf-1d874e9e50b7","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.035","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"bc1826ac-bf9b-4355-9eaf-1d874e9e50b7"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.035","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"121.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.513","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"3c7e40fa-e9ef-4d76-aae8-fbc936bcea38","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"3c7e40fa-e9ef-4d76-aae8-fbc936bcea38","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"3c7e40fa-e9ef-4d76-aae8-fbc936bcea38","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":5,"age":"5.403864833s","hit_ratio":0.8333333333333334}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"食譜推薦成功","service":"recipe-generator","request_id":"3c7e40fa-e9ef-4d76-aae8-fbc936bcea38","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.514","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"970.583µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.516","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"e7eb170b-e134-4f88-8040-a86f12513982","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.516","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"e7eb170b-e134-4f88-8040-a86f12513982","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.516","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"e7eb170b-e134-4f88-8040-a86f12513982","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.516","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"e7eb170b-e134-4f88-8040-a86f12513982"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.516","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"136.291µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.898","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d21a8fc9-a437-4175-ac77-4a85b613f16f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d21a8fc9-a437-4175-ac77-4a85b613f16f","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d21a8fc9-a437-4175-ac77-4a85b613f16f","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":6,"age":"5.788958542s","hit_ratio":0.8571428571428571}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"食譜推薦成功","service":"recipe-generator","request_id":"d21a8fc9-a437-4175-ac77-4a85b613f16f","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.899","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.061625ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.901","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d6229b0b-2c9e-4df6-b7e3-b89bc040fcbc","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.901","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d6229b0b-2c9e-4df6-b7e3-b89bc040fcbc","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:36.901","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d6229b0b-2c9e-4df6-b7e3-b89bc040fcbc","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.901","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"d6229b0b-2c9e-4df6-b7e3-b89bc040fcbc"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:36.901","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"231.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"92791c9b-7367-4cee-b704-2ebf8543b762","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"92791c9b-7367-4cee-b704-2ebf8543b762","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"92791c9b-7367-4cee-b704-2ebf8543b762","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":7,"age":"6.845111917s","hit_ratio":0.875}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"食譜推薦成功","service":"recipe-generator","request_id":"92791c9b-7367-4cee-b704-2ebf8543b762","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.955","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"529.25µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.957","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ae1d8f16-1d8a-45f1-b9a4-b443804da61e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.957","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ae1d8f16-1d8a-45f1-b9a4-b443804da61e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:37.957","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ae1d8f16-1d8a-45f1-b9a4-b443804da61e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:37.957","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ae1d8f16-1d8a-45f1-b9a4-b443804da61e"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:37.957","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"160.917µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.751","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b999e59d-b85e-4e00-b7ec-364d3e5d7452","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.751","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b999e59d-b85e-4e00-b7ec-364d3e5d7452","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.751","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b999e59d-b85e-4e00-b7ec-364d3e5d7452","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.751","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.752","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":8,"age":"7.641322167s","hit_ratio":0.8888888888888888}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.752","msg":"食譜推薦成功","service":"recipe-generator","request_id":"b999e59d-b85e-4e00-b7ec-364d3e5d7452","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.752","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.193417ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.754","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"b6bc172d-c4f8-45de-9bcd-dce36dca8560","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.754","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"b6bc172d-c4f8-45de-9bcd-dce36dca8560","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:38.754","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"b6bc172d-c4f8-45de-9bcd-dce36dca8560","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:38.754","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"b6bc172d-c4f8-45de-9bcd-dce36dca8560"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:38.754","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"194.75µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8fe9b8c7-c7ff-4b0b-b704-299dfcdff635","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"8fe9b8c7-c7ff-4b0b-b704-299dfcdff635","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"8fe9b8c7-c7ff-4b0b-b704-299dfcdff635","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":9,"age":"8.174832417s","hit_ratio":0.9}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"食譜推薦成功","service":"recipe-generator","request_id":"8fe9b8c7-c7ff-4b0b-b704-299dfcdff635","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.285","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"314.333µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.287","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"1d7499bc-6503-4e51-bb31-8396410b555d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.287","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"1d7499bc-6503-4e51-bb31-8396410b555d","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.287","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"1d7499bc-6503-4e51-bb31-8396410b555d","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:39.287","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"1d7499bc-6503-4e51-bb31-8396410b555d"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:39.287","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"80.959µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.728","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ddd86d11-baad-42ff-9e93-58f304c6bd49","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.728","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ddd86d11-baad-42ff-9e93-58f304c6bd49","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.728","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ddd86d11-baad-42ff-9e93-58f304c6bd49","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.728","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.729","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:58:31.110","access_count":10,"age":"8.618303667s","hit_ratio":0.9090909090909091}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.729","msg":"食譜推薦成功","service":"recipe-generator","request_id":"ddd86d11-baad-42ff-9e93-58f304c6bd49","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.729","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"479.75µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.730","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"eac5e764-8809-4be4-a04d-e7487a1c5571","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.730","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"eac5e764-8809-4be4-a04d-e7487a1c5571","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:58:39.730","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"eac5e764-8809-4be4-a04d-e7487a1c5571","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:39.730","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"eac5e764-8809-4be4-a04d-e7487a1c5571"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:58:39.730","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"118.542µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:08.034","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:08.034","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:08.034","msg":"Cache manager closed","service":"recipe-generator","total_hits":10,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.721","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:11.722","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:16.127","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"56ba70c6-6c2a-4b9b-a558-d194adb50f45","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:16.128","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"56ba70c6-6c2a-4b9b-a558-d194adb50f45","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:16.128","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"56ba70c6-6c2a-4b9b-a558-d194adb50f45","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:16.128","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:16.129","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.061","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:59:28.061","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.062","msg":"食譜推薦成功","service":"recipe-generator","request_id":"56ba70c6-6c2a-4b9b-a558-d194adb50f45","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.062","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"11.935146083s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.073","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ddaae98f-0e40-420b-96a5-519fc5dea0ff","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.073","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ddaae98f-0e40-420b-96a5-519fc5dea0ff","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.073","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ddaae98f-0e40-420b-96a5-519fc5dea0ff","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:59:28.073","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ddaae98f-0e40-420b-96a5-519fc5dea0ff"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:59:28.073","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"442.416µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.964","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"40f8adc8-c6ad-4e0f-8050-9c856d1dd815","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"40f8adc8-c6ad-4e0f-8050-9c856d1dd815","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"40f8adc8-c6ad-4e0f-8050-9c856d1dd815","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:59:28.061","access_count":1,"age":"903.65825ms","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"食譜推薦成功","service":"recipe-generator","request_id":"40f8adc8-c6ad-4e0f-8050-9c856d1dd815","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:28.965","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"669.25µs","request_id":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:28.967","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"20.667µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:29.713","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"49.917µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:29.726","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"44.625µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:30.038","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"31.958µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:30.050","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"39.667µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:30.884","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"51.958µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:30.896","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"46µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:36.518","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"38.625µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:36.530","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"53.75µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:38.058","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"31.083µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:38.072","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"29.166µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4d56f3ad-d818-4a7f-a473-bbe2144bac9f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"4d56f3ad-d818-4a7f-a473-bbe2144bac9f","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"4d56f3ad-d818-4a7f-a473-bbe2144bac9f","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:59:28.061","access_count":2,"age":"11.184884208s","hit_ratio":0.6666666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"食譜推薦成功","service":"recipe-generator","request_id":"4d56f3ad-d818-4a7f-a473-bbe2144bac9f","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.246","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"345.666µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.248","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7c685940-e47f-4a7c-8a65-176a14f53d6c","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.248","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"7c685940-e47f-4a7c-8a65-176a14f53d6c","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"21:59:39.248","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"7c685940-e47f-4a7c-8a65-176a14f53d6c","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"21:59:39.248","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"7c685940-e47f-4a7c-8a65-176a14f53d6c"}
{"level":"\u001b[31mERR\u001b[0m","time":"21:59:39.248","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"117.042µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:42.015","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"64.541µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:42.027","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"29.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:42.667","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"66.208µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"21:59:42.679","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"38.666µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ac1b631a-1621-45da-a187-6aeeb7cc6561","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ac1b631a-1621-45da-a187-6aeeb7cc6561","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ac1b631a-1621-45da-a187-6aeeb7cc6561","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"Cache hit","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"21:59:28.061","access_count":3,"age":"1m48.265070541s","hit_ratio":0.75}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"食譜推薦成功","service":"recipe-generator","request_id":"ac1b631a-1621-45da-a187-6aeeb7cc6561","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.326","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"394.042µs","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.328","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"21aeabcf-8af8-400c-88fa-36df6b5cf3ae","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.328","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"21aeabcf-8af8-400c-88fa-36df6b5cf3ae","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:01:16.328","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"21aeabcf-8af8-400c-88fa-36df6b5cf3ae","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"22:01:16.328","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"21aeabcf-8af8-400c-88fa-36df6b5cf3ae"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:01:16.328","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"93.834µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:04:54.935","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:04:54.936","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:04:54.936","msg":"Cache manager closed","service":"recipe-generator","total_hits":3,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.138","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:07.139","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:19.972","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7dc901cd-01a4-4dbc-89a9-62b042e1b962","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:19.973","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"7dc901cd-01a4-4dbc-89a9-62b042e1b962","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:19.973","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"7dc901cd-01a4-4dbc-89a9-62b042e1b962","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:19.973","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:19.973","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.499","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"22:05:28.499","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.500","msg":"食譜推薦成功","service":"recipe-generator","request_id":"7dc901cd-01a4-4dbc-89a9-62b042e1b962","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.500","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.528186917s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.511","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8425897b-9342-4898-bf78-3249f18183ef","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.511","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"8425897b-9342-4898-bf78-3249f18183ef","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:28.512","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"8425897b-9342-4898-bf78-3249f18183ef","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"22:05:28.512","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"8425897b-9342-4898-bf78-3249f18183ef"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:05:28.512","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"483.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:52.033","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"811684ed-57c6-4f57-aa16-b74f8c0e2728","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:52.033","msg":"Cache miss","service":"recipe-generator","key":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:59.111","msg":"Cache entry set","service":"recipe-generator","key":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302","expires_at":"22:05:59.111","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:59.111","msg":"食譜生成成功","service":"recipe-generator","request_id":"811684ed-57c6-4f57-aa16-b74f8c0e2728","dish_name":"手機炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:05:59.111","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.078658708s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.054","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"8bcb6945-118c-4d38-b2a0-e459dab8b737","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.055","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.056","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_220614.json","prompt_length":970,"image_length":30031}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.070","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.783","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.783","msg":"食物辨識失敗","service":"recipe-generator","error":"no choices in OpenRouter response","request_id":"8bcb6945-118c-4d38-b2a0-e459dab8b737","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.783","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"729.162459ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.811","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"e29379e9-455c-4c29-8406-bf5aad6f168b","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.812","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":"這可能是義大利麵"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:06:14.812","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_220614.json","prompt_length":994,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.812","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.812","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"e29379e9-455c-4c29-8406-bf5aad6f168b","image_type":"unknown_format","description_hint":"這可能是義大利麵"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:06:14.812","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"618.666µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:09.247","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:09.247","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:09.247","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":3,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.224","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:17.225","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:50.840","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"548c367e-e485-4176-aba7-0d1ec0cdbe72","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:50.840","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:50.841","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221150.json","prompt_length":970,"image_length":30031}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:50.856","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.872","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.872","msg":"食物辨識失敗","service":"recipe-generator","error":"no choices in OpenRouter response","request_id":"548c367e-e485-4176-aba7-0d1ec0cdbe72","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.872","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.033044334s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:51.898","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"01bf73e7-7a1a-4d54-ae65-83e3b06bcfd7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:51.898","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:11:51.898","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221151.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.898","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.898","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"01bf73e7-7a1a-4d54-ae65-83e3b06bcfd7","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:11:51.898","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"361µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:03.236","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"3559a6b7-eeaf-4948-9b48-fb8fdf84a6df","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:03.236","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:03.237","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221403.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:03.240","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.298","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.298","msg":"食物辨識失敗","service":"recipe-generator","error":"no choices in OpenRouter response","request_id":"3559a6b7-eeaf-4948-9b48-fb8fdf84a6df","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.298","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.062738959s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:04.311","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"95d49249-884c-4800-811f-0e1c92fa2f1a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:04.312","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:14:04.312","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221404.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.312","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.312","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"95d49249-884c-4800-811f-0e1c92fa2f1a","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:14:04.312","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"321.625µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:00.537","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:00.537","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:00.537","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:03.901","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:12.724","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"1b9fdb53-1622-4504-8f3d-8cfea8ff11b1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:12.725","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:12.726","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221512.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:12.730","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.571","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.571","msg":"食物辨識失敗","service":"recipe-generator","error":"no choices in OpenRouter response","request_id":"1b9fdb53-1622-4504-8f3d-8cfea8ff11b1","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.571","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"847.562959ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:13.584","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"3902e47a-e4cc-44f1-b4fe-46253f72ba45","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:13.584","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:15:13.585","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221513.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.585","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.585","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"3902e47a-e4cc-44f1-b4fe-46253f72ba45","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:15:13.585","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.234833ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:36.734","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:36.735","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:36.735","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.607","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:42.608","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:48.030","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"a4027e73-9148-4564-8006-fe38f9fc0610","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:48.031","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:48.032","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221748.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:48.036","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.139","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.139","msg":"AI 無回應 (no choices)","service":"recipe-generator","request_id":"a4027e73-9148-4564-8006-fe38f9fc0610","image_type":"base64_data_uri_jpeg","image_length":20775,"description_hint":"","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.139","msg":"Server error","service":"recipe-generator","status":502,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.108917625s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:49.174","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"d1919682-b929-42f4-8ee7-f56588146cf4","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:49.174","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:17:49.175","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221749.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.175","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.175","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"d1919682-b929-42f4-8ee7-f56588146cf4","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:17:49.175","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.277958ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:45.797","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:45.798","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:45.798","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.287","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.288","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.288","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.288","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.288","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.288","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.289","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:51.289","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:54.756","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"cf2e93b4-db82-49db-a1a1-d72d7de570fd","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:54.757","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:54.758","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221954.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:54.762","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[31mERR\u001b[0m","time":"22:19:55.883","msg":"AI 服務請求失敗","service":"recipe-generator","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:19:55.883","msg":"AI 無回應 (no choices)","service":"recipe-generator","request_id":"cf2e93b4-db82-49db-a1a1-d72d7de570fd","image_type":"base64_data_uri_jpeg","image_length":20775,"description_hint":"","error":"no choices in OpenRouter response"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:19:55.884","msg":"Server error","service":"recipe-generator","status":502,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.128852041s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:55.917","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"0807e0fe-2666-4908-9caa-4c94e6a2e9d3","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:55.917","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:19:55.918","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_221955.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:19:55.918","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:19:55.918","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"0807e0fe-2666-4908-9caa-4c94e6a2e9d3","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:19:55.918","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.373ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:22.374","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:22.375","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:22.375","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.036","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:29.037","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:36.524","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"9b7073dc-4364-4ba8-a448-8db12daaed1a","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:36.525","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:36.526","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223136.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:36.530","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.535","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:31:39.535","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.536","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.536","msg":"食物辨識成功","service":"recipe-generator","request_id":"9b7073dc-4364-4ba8-a448-8db12daaed1a","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.536","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.013112709s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.540","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"d9d91c5a-7a3a-4a2c-a01f-52cf55bdc952","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.540","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:31:39.541","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223139.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:31:39.541","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:31:39.541","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"d9d91c5a-7a3a-4a2c-a01f-52cf55bdc952","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:31:39.541","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.230458ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.371","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"4fcc3eb5-ba47-4625-8b67-05c013173692","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.371","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.372","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223218.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.376","msg":"Cache hit","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:31:39.535","access_count":1,"age":"38.840528166s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.376","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.376","msg":"食物辨識成功","service":"recipe-generator","request_id":"4fcc3eb5-ba47-4625-8b67-05c013173692","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.376","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"5.642375ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.378","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"49433fca-157e-4497-83a8-5a4229a39313","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.378","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:18.378","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223218.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:18.378","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:18.378","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"49433fca-157e-4497-83a8-5a4229a39313","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:32:18.378","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"548.667µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:22.089","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:22.090","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:22.090","msg":"Cache manager closed","service":"recipe-generator","total_hits":1,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.230","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:28.231","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:31.430","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"4955a51c-e1c5-4e6e-b5e3-2e81615893f7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:31.431","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:31.431","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223231.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:31.435","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:33.164","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:32:33.164","current_size":1,"max_size":1000}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:33.164","msg":"AI 響應解析失敗","service":"recipe-generator","error":"invalid character '`' looking for beginning of value"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:33.165","msg":"食物辨識失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '`' looking for beginning of value","request_id":"4955a51c-e1c5-4e6e-b5e3-2e81615893f7","image_type":"base64_data_uri_jpeg","image_length":20775,"description_hint":""}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:33.165","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.735185709s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:33.199","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"8e0ea966-db08-4bd1-b62a-35a4b5a0a7da","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:33.199","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:32:33.200","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223233.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:33.200","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:32:33.201","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"8e0ea966-db08-4bd1-b62a-35a4b5a0a7da","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:32:33.201","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.418959ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:38.948","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:38.949","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:38.949","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.154","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.155","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:42.155","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:49.551","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:49.551","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:49.551","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":0,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:35:53.162","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:07.187","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"968a0b2c-e061-4ed3-912c-f2f8f386adda","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:07.188","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:07.189","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223607.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:07.193","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.102","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:36:10.102","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.102","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.102","msg":"食物辨識成功","service":"recipe-generator","request_id":"968a0b2c-e061-4ed3-912c-f2f8f386adda","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.103","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.915508959s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.110","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"de44a7a3-a7ab-44a9-9dc0-33e0ce4fd711","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.110","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:10.111","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223610.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:10.111","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:10.111","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"de44a7a3-a7ab-44a9-9dc0-33e0ce4fd711","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:10.111","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.065875ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.642","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"915c1681-175f-41ad-884f-d70e5ad23b17","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.642","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.643","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223619.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.647","msg":"Cache hit","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:36:10.102","access_count":1,"age":"9.544968875s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.647","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.647","msg":"食物辨識成功","service":"recipe-generator","request_id":"915c1681-175f-41ad-884f-d70e5ad23b17","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:19.647","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"5.319708ms","request_id":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:19.649","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"26.292µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:29.052","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"143µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:29.063","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"22858e31-e133-4c47-94c2-59a0cee133a0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:29.063","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:29.063","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223629.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:29.063","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:29.063","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"22858e31-e133-4c47-94c2-59a0cee133a0","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:29.064","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"501.709µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.074","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"a756e46c-13ba-4e31-a9bd-3457f7121cda","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.075","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.075","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223643.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.079","msg":"Cache hit","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:36:10.102","access_count":2,"age":"32.976917792s","hit_ratio":0.6666666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.079","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.079","msg":"食物辨識成功","service":"recipe-generator","request_id":"a756e46c-13ba-4e31-a9bd-3457f7121cda","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.079","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"4.731083ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.081","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"f47bdba0-4021-43f1-990c-9e2a2a2ae61d","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.081","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:43.082","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223643.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:43.082","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:43.082","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"f47bdba0-4021-43f1-990c-9e2a2a2ae61d","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:43.082","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"609.959µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.724","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"4c7bfa9c-649d-4f29-85f0-ed9555083a4e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.725","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.726","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223659.json","prompt_length":970,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.729","msg":"Cache hit","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:36:10.102","access_count":3,"age":"49.627377833s","hit_ratio":0.75}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.729","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.729","msg":"食物辨識成功","service":"recipe-generator","request_id":"4c7bfa9c-649d-4f29-85f0-ed9555083a4e","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.729","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"5.395458ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.732","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"907e73b6-eed3-4191-b1a5-74c5c13490bb","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.732","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:36:59.732","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_223659.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:59.732","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:36:59.732","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"907e73b6-eed3-4191-b1a5-74c5c13490bb","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:36:59.732","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"580.333µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:35.162","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"302f20c2-2883-4480-8e58-372575b4cbb2","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:35.162","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:35.163","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224335.json","prompt_length":970,"image_length":30031}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:35.178","msg":"Cache miss","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","hit_ratio":0.6}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.393","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:9b0035eadaee33d86b4b90169e2e4c6d0658e0ca6512513e691f3f9c03d0b358:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","expires_at":"22:43:38.393","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.393","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.393","msg":"食物辨識成功","service":"recipe-generator","request_id":"302f20c2-2883-4480-8e58-372575b4cbb2","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.393","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.231981083s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.402","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"8b408a3f-2763-498e-bc6d-b1c4e8fbd096","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.402","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:43:38.403","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224338.json","prompt_length":970,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:43:38.403","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:43:38.403","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"8b408a3f-2763-498e-bc6d-b1c4e8fbd096","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:43:38.403","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.114291ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:05.304","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:05.305","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:05.305","msg":"Cache manager closed","service":"recipe-generator","total_hits":3,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.105","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:12.106","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:16.746","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"5638c1f7-bb6b-4709-b8bf-beb22a2c27da","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:16.747","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:16.748","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224616.json","prompt_length":878,"image_length":30031}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:16.763","msg":"Cache miss","service":"recipe-generator","key":"multimodal:a06701dfb7ed2d81076208b9dc5d15b0ad7399310750936002cead66a7f603f2:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.842","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:a06701dfb7ed2d81076208b9dc5d15b0ad7399310750936002cead66a7f603f2:9d18aa248ab9a177c88f7f38362f59ba4a1acd93113331d511977df0eb2e9ca5","expires_at":"22:46:19.842","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.843","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.843","msg":"食物辨識成功","service":"recipe-generator","request_id":"5638c1f7-bb6b-4709-b8bf-beb22a2c27da","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.843","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.097628459s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.850","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"eaa443c4-1c90-42e4-80b2-abb07342c143","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.850","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:46:19.851","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224619.json","prompt_length":878,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:46:19.851","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:46:19.851","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"eaa443c4-1c90-42e4-80b2-abb07342c143","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:46:19.851","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.006709ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:11.411","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"509f0461-1ed9-4bbd-8252-8f91ef3da98f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:11.412","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:11.413","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224711.json","prompt_length":878,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:11.417","msg":"Cache miss","service":"recipe-generator","key":"multimodal:a06701dfb7ed2d81076208b9dc5d15b0ad7399310750936002cead66a7f603f2:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.806","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:a06701dfb7ed2d81076208b9dc5d15b0ad7399310750936002cead66a7f603f2:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:47:13.805","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.806","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.806","msg":"食物辨識成功","service":"recipe-generator","request_id":"509f0461-1ed9-4bbd-8252-8f91ef3da98f","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.806","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.394758s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.815","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"dca7ff42-1c05-4b50-b633-f71e4d64ac98","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.815","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"22:47:13.815","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_224713.json","prompt_length":878,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"22:47:13.816","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"22:47:13.816","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"dca7ff42-1c05-4b50-b633-f71e4d64ac98","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"22:47:13.816","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.160375ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.550","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"025e5d6e-502f-4946-ae53-1db0396ae03e","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.550","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.551","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235428.json","prompt_length":878,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.556","msg":"Cache hit","service":"recipe-generator","key":"multimodal:a06701dfb7ed2d81076208b9dc5d15b0ad7399310750936002cead66a7f603f2:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"22:47:13.805","access_count":1,"age":"1h7m14.77169375s","hit_ratio":0.3333333333333333}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.556","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.556","msg":"食物辨識成功","service":"recipe-generator","request_id":"025e5d6e-502f-4946-ae53-1db0396ae03e","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.556","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.1615ms","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.558","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"60102df3-7494-459b-b76c-13d395a43393","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.558","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:28.558","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235428.json","prompt_length":878,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"23:54:28.558","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"23:54:28.558","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"60102df3-7494-459b-b76c-13d395a43393","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"23:54:28.558","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"450.375µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:47.949","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:47.950","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:54:47.950","msg":"Cache manager closed","service":"recipe-generator","total_hits":1,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.263","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.264","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.264","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.264","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.264","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.264","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.265","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"23:57:38.265","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:09.646","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"22a66862-cbdf-4118-a8ac-273f09ccb877","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:09.647","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:09.648","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235809.json","prompt_length":967,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:09.652","msg":"Cache miss","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.008","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"23:58:13.008","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.008","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.008","msg":"食物辨識成功","service":"recipe-generator","request_id":"22a66862-cbdf-4118-a8ac-273f09ccb877","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.008","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.363154667s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.012","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"bcc183b1-1bf3-48b9-acbc-0ac163882de8","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.012","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:58:13.013","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235813.json","prompt_length":967,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"23:58:13.013","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"23:58:13.013","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"bcc183b1-1bf3-48b9-acbc-0ac163882de8","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"23:58:13.013","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.049375ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:03.597","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:03.597","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:03.598","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.686","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.687","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.687","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.687","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.687","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.687","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.688","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:12.688","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:14.364","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"0b53a1de-a491-47e0-97d4-6c5b79a3c540","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:14.365","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:14.366","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235914.json","prompt_length":967,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:14.370","msg":"Cache miss","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.071","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"23:59:17.071","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.072","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.072","msg":"食物辨識成功","service":"recipe-generator","request_id":"0b53a1de-a491-47e0-97d4-6c5b79a3c540","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.072","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.708693708s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.080","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"4b526b51-8412-4fce-a7ba-779f8512f9ee","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.080","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"23:59:17.081","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250514_235917.json","prompt_length":967,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"23:59:17.081","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"23:59:17.081","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"4b526b51-8412-4fce-a7ba-779f8512f9ee","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"23:59:17.081","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.479958ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:01.469","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"11654f7a-6cd0-4ec5-a3ac-11d784affac9","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:01.470","msg":"Cache miss","service":"recipe-generator","key":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:09.739","msg":"Cache entry set","service":"recipe-generator","key":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302","expires_at":"00:00:09.739","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:09.740","msg":"食譜生成成功","service":"recipe-generator","request_id":"11654f7a-6cd0-4ec5-a3ac-11d784affac9","dish_name":"手機炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:09.740","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.271064458s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:42.155","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"51b29c3a-2a1c-4bca-b237-ea9ce6e062aa","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:42.156","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"51b29c3a-2a1c-4bca-b237-ea9ce6e062aa","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:42.156","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"51b29c3a-2a1c-4bca-b237-ea9ce6e062aa","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:42.156","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:42.156","msg":"Cache miss","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.231","msg":"Cache entry set","service":"recipe-generator","key":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a","expires_at":"00:00:53.231","current_size":3,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.231","msg":"食譜推薦成功","service":"recipe-generator","request_id":"51b29c3a-2a1c-4bca-b237-ea9ce6e062aa","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.231","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"11.076021875s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.239","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4f891a79-b7d0-426d-ac5b-6cf5efb621c9","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.240","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"4f891a79-b7d0-426d-ac5b-6cf5efb621c9","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:00:53.240","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"4f891a79-b7d0-426d-ac5b-6cf5efb621c9","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"00:00:53.240","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"4f891a79-b7d0-426d-ac5b-6cf5efb621c9"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:00:53.240","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"442.834µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:01:13.686","msg":"Failed to identify ingredients","service":"recipe-generator","error":"failed to process request: failed to process image: invalid image data format","request_id":"f7f22c16-659b-4156-a0b0-2443a67a49ad"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:01:13.687","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.6335ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:01:13.698","msg":"Failed to identify ingredients","service":"recipe-generator","error":"failed to process request: failed to process image: invalid image data format","request_id":"cefbd12a-441c-4f1c-880a-379d639bab32"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:01:13.698","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"220.708µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:01:56.154","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:01:56.155","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:01:56.155","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":3,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.276","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:01.277","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:05.802","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"d941fcbe-da11-4282-b78c-3b2622a1c716","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:05.802","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:05.803","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250515_000205.json","prompt_length":967,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:05.807","msg":"Cache miss","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.985","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851","expires_at":"00:02:08.985","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.985","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.985","msg":"食物辨識成功","service":"recipe-generator","request_id":"d941fcbe-da11-4282-b78c-3b2622a1c716","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.985","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"3.184193334s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.995","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"d6da4c49-f9e2-4fdf-85e3-e3e4a96fd435","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.995","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:02:08.996","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250515_000208.json","prompt_length":967,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:08.996","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:08.996","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"d6da4c49-f9e2-4fdf-85e3-e3e4a96fd435","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"00:02:08.996","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.096125ms","request_id":"","error_type":"client_error"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:15.492","msg":"Failed to identify ingredients","service":"recipe-generator","error":"failed to process request: failed to process image: invalid image data format","request_id":"3e983397-92d1-416e-b51a-7a5fdfccc0d8"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:15.492","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.981584ms","request_id":"","error_type":"server_error"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:15.503","msg":"Failed to identify ingredients","service":"recipe-generator","error":"failed to process request: failed to process image: invalid image data format","request_id":"94c2ce3b-188b-4754-9324-f27b52c3089c"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:02:15.503","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"289.125µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:06:20.461","msg":"Cache miss","service":"recipe-generator","key":"multimodal:f09fd3488ab234b86ef45933c34246ff73f455638abab0138f644b6340e27184:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:06:27.194","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:f09fd3488ab234b86ef45933c34246ff73f455638abab0138f644b6340e27184:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","expires_at":"00:06:27.194","current_size":2,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:06:27.195","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":29,"equipment_count":5}
{"level":"\u001b[32mINF\u001b[0m","time":"00:06:27.195","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"a5b8bd26-32ab-4e71-b7b7-92df68d134d1","ingredients_count":29,"equipment_count":5}
{"level":"\u001b[32mINF\u001b[0m","time":"00:06:27.195","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.757247791s","request_id":""}
{"level":"\u001b[31mERR\u001b[0m","time":"00:06:27.203","msg":"Failed to identify ingredients","service":"recipe-generator","error":"failed to process request: failed to process image: invalid image data format","request_id":"69451020-1351-4fcb-9b06-fccdfc112965"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:06:27.203","msg":"Server error","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"320.958µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:13.612","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:13.612","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:13.612","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":2,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.955","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:18.956","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:25.112","msg":"Cache miss","service":"recipe-generator","key":"multimodal:f09fd3488ab234b86ef45933c34246ff73f455638abab0138f644b6340e27184:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:31.693","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:f09fd3488ab234b86ef45933c34246ff73f455638abab0138f644b6340e27184:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","expires_at":"00:11:31.693","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:31.694","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:31.694","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"2aeefdf7-2109-4041-961e-d53a331e3af2","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:11:31.694","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.608634167s","request_id":""}
{"level":"\u001b[31mERR\u001b[0m","time":"00:11:31.703","msg":"Invalid image format (handler)","service":"recipe-generator","request_id":"b071f735-a9b4-46af-a088-1d0c53880f79","image_type":"unknown_format","image_length":21}
{"level":"\u001b[33mWRN\u001b[0m","time":"00:11:31.703","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"257.542µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:12:59.498","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:12:59.499","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:12:59.499","msg":"Cache manager closed","service":"recipe-generator","total_hits":0,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.197","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.197","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.197","msg":"Cache manager initialized","service":"recipe-generator","max_size":1000,"ttl":"24h0m0s","cleanup_interval":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.198","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.198","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.198","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.198","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:05.198","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:10.668","msg":"Cache miss","service":"recipe-generator","key":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","hit_ratio":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:18.251","msg":"Cache entry set","service":"recipe-generator","key":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","expires_at":"00:13:18.250","current_size":1,"max_size":1000}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:18.251","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:18.251","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"95b1b60a-3d29-4588-bec6-69aebdd4d564","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:18.251","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.609900917s","request_id":""}
{"level":"\u001b[31mERR\u001b[0m","time":"00:13:18.261","msg":"Invalid image format (handler)","service":"recipe-generator","request_id":"b33305bd-f4f0-48bb-876b-cc84e3e03199","image_type":"unknown_format","image_length":21}
{"level":"\u001b[33mWRN\u001b[0m","time":"00:13:18.261","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"283.25µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:27.124","msg":"Cache hit","service":"recipe-generator","key":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","expires_at":"00:13:18.250","access_count":1,"age":"8.873458042s","hit_ratio":0.5}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:27.124","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:27.124","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"dd5c09f9-2e3e-4fe0-b776-d06d54b06354","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:27.124","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"24.786666ms","request_id":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"00:13:27.126","msg":"Client error","service":"recipe-generator","status":429,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"17.541µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:40.523","msg":"Cache hit","service":"recipe-generator","key":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60","expires_at":"00:13:18.250","access_count":2,"age":"22.272387833s","hit_ratio":0.6666666666666666}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:40.523","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:40.523","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"5c54a180-b136-4cd9-be17-ce176ca3f808","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"00:13:40.523","msg":"Request completed","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"25.178625ms","request_id":""}
{"level":"\u001b[31mERR\u001b[0m","time":"00:13:40.525","msg":"Invalid image format (handler)","service":"recipe-generator","request_id":"d2c5a417-2ba0-4f88-9b67-ba4ea9e7328e","image_type":"unknown_format","image_length":21}
{"level":"\u001b[33mWRN\u001b[0m","time":"00:13:40.525","msg":"Client error","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"52.292µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:16:58.866","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:16:58.867","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:16:58.867","msg":"Cache manager closed","service":"recipe-generator","total_hits":2,"total_misses":1,"total_evictions":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.334","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:05.335","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:33.901","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"091c6763-e5dd-42b0-8768-3d8d080cc667","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:33.901","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"091c6763-e5dd-42b0-8768-3d8d080cc667","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:33.902","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"091c6763-e5dd-42b0-8768-3d8d080cc667","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:33.902","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:33.902","msg":"快取未命中","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:44.009","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:17:44.009","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character ']' after top-level value","request_id":"091c6763-e5dd-42b0-8768-3d8d080cc667"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:17:44.009","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"10.108350041s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:44.045","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"ff5c708b-93e5-473c-9441-f24066377330","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:44.045","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"ff5c708b-93e5-473c-9441-f24066377330","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:17:44.045","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"ff5c708b-93e5-473c-9441-f24066377330","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"00:17:44.045","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"ff5c708b-93e5-473c-9441-f24066377330"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:17:44.045","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"246.792µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:25.394","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:25.395","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:25.395","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.179","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.180","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:33.181","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:39.076","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"59a11d4f-e5ad-4159-96a3-8d8df1974983","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:39.077","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"59a11d4f-e5ad-4159-96a3-8d8df1974983","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:39.077","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"59a11d4f-e5ad-4159-96a3-8d8df1974983","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:39.077","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:39.078","msg":"快取未命中","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.075","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.076","msg":"食譜推薦成功","service":"recipe-generator","request_id":"59a11d4f-e5ad-4159-96a3-8d8df1974983","recipes_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.076","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.000567375s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.083","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"d7f4ab0d-c3fb-4969-8ab7-5548cf1e6cb1","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.083","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"d7f4ab0d-c3fb-4969-8ab7-5548cf1e6cb1","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[32mINF\u001b[0m","time":"00:20:45.084","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"d7f4ab0d-c3fb-4969-8ab7-5548cf1e6cb1","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"00:20:45.084","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"d7f4ab0d-c3fb-4969-8ab7-5548cf1e6cb1"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:20:45.084","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"444.083µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:40.267","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:40.267","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:40.268","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.969","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Starting application","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:24:46.970","msg":"Starting server","service":"recipe-generator","port":8080,"env":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:19.703","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:19.704","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:19.704","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":0,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.524","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.525","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:31.526","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:44.738","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"7379e26d-4c3f-4c2b-872f-a98084cdf54f","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:44.739","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"無\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": [\n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:44.739","msg":"快取未命中","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:51.915","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6f5c0f38d5be75e23093c012703669ffe2699e543683d4be989edb861f90278a"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:27:51.915","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character ']' after top-level value","request_id":"7379e26d-4c3f-4c2b-872f-a98084cdf54f"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:27:51.915","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.177442958s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:27:51.940","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"54f914b8-0cf1-4a1b-8f67-a806ae28972b","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:27:51.940","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"54f914b8-0cf1-4a1b-8f67-a806ae28972b"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:27:51.940","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"225.25µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:27.620","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:27.620","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:27.620","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.935","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:34.936","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:45.177","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"38f7ac7d-e77c-44dd-b8e5-ade5335961a7","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:45.178","msg":"快取未命中","service":"recipe-generator","鍵":"text:4558abb103e9d1a96917895ffd1c96323c4fb73f22c0df2d7a46a5ad25d7b011"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:51.823","msg":"快取已儲存","service":"recipe-generator","鍵":"text:4558abb103e9d1a96917895ffd1c96323c4fb73f22c0df2d7a46a5ad25d7b011"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:32:51.823","msg":"AI 回應解析失敗","service":"recipe-generator","error":"invalid character ']' after top-level value","ai_response_length":3379,"ai_response_preview":"{\"suggested_recipes\":[{\"dish_name\":\"番茄炒蛋\",\"dish_description\":\"經典家常菜，簡單快速且美味。\",\"ingredients\":[{\"name\":\"雞蛋\",\"type\":\"蛋類\",\"amount\":\"3\",\"unit\":\"顆\",\"preparation\":\"打散\"},{\"name\":\"小小番茄\",\"type\":\"蔬菜\",\"amount\":\"2\",\"unit\":\"顆\",\"preparation\":\"切塊\"}],\"equipment\":[{\"name\":\"炒鍋\",\"type\":\"鍋具\",\"size\":\"中型\",\"material\":\"不鏽鋼\",\"power_source\":\"瓦斯爐\"}],\"recipe\":[{\"step_number\":1,\"title\":\"準備工作\",\"description\":\"將雞蛋打散，番茄切塊。\",\"actions\":[{\"action\":\"打散雞蛋\",\"tool_required\":\"碗、筷子\",\"material_required\":[\"雞蛋\"],\"time_minutes\":1,\"instruction_detail\":\"用筷子快速攪拌雞蛋，直到蛋黃和蛋白完全混合。\"}],\"estimated_total_time\":\"2分鐘\",\"temperature\":\"室溫\",\"warnings\":\"null\",\"notes\":\"打蛋的時候可以加入少許鹽或料酒去腥提味，但由於未提供，此處省略。\"},{\"step_number\":2,\"title\":\"熱鍋\",\"description\":\"將炒鍋加熱，加入適量油。\",\"actions\":[{\"action\":\"開瓦斯爐\",\"tool_required\":\"瓦斯爐\",\"material_required\":[\"油\"],\"time_minutes\":1,\"instruction_detail\":\"將瓦斯爐開中小火，放入炒鍋，待鍋體微微發熱後，倒入約1湯匙的食用油。\"}],\"estimated_total_time\":\"3分鐘\",\"temperature\":\"中小火\",\"warnings\":\"注意不要讓油過熱冒煙，容易產生有害物質。\",\"notes\":\"如果沒有食用油，可以使用其他食用油替代，但風味會略有不同。\"},{\"step_number\":3,\"title\":\"炒雞蛋\",\"description\":\"將打散的雞蛋倒入鍋中，快速翻炒至半熟。\",\"actions\":[{\"action\":\"倒入蛋液\",\"tool_required\":\"無\",\"material_required\":[\"蛋液\"],\"time_minutes\":2,\"instruction_detail\":\"將打散的雞蛋液倒入熱鍋中，用鍋鏟快速翻炒，讓蛋液均勻受熱。\"}],\"estimated_total_time\":\"5分鐘\",\"temperature\":\"中小火\",\"warnings\":\"不要炒太久，以免雞蛋變老。\",\"notes\":\"雞蛋炒至表面凝固即可，內部可以保持稍微濕潤的狀態。\"},{\"step_number\":4,\"title\":\"加入番茄\",\"description\":\"將切塊的番茄倒入鍋中，與雞蛋一起翻炒。\",\"actions\":[{\"action\":\"倒入番茄\",\"tool_required\":\"無\",\"material_required\":[\"番茄\"],\"time_minutes\":1,\"instruction_detail\":\"將切好的番茄塊倒入鍋中，和雞蛋一起翻炒，使番茄均勻受熱。\"}],\"estimated_total_time\":\"6分鐘\",\"temperature\":\"中小火\",\"warnings\":\"null\",\"notes\":\"null\"},{\"step_number\":5,\"title\":\"調味\",\"description\":\"根據個人口味加入鹽調味，翻炒均勻即可起鍋。\",\"actions\":[{\"action\":\"加入鹽\",\"tool_required\":\"無\",\"material_required\":[\"鹽\"],\"time_minutes\":1,\"instruction_detail\":\"加入少量鹽，翻炒均勻，可依個人喜好調整鹹度。\"}],\"estimated_total_time\":\"7分鐘\",\"temperature\":\"中小火\",\"warnings\":\"鹽不要加太多，以免過鹹。\",\"notes\":\"如果沒有鹽，可以不加，或者用其他調味料替代，但風味會有所不同。\"},{\"step_number\":6,\"title\":\"起鍋\",\"description\":\"將炒好的番茄炒蛋盛出，即可享用。\",\"actions\":[{\"action\":\"盛盤\",\"tool_required\":\"盤子\",\"material_required\":[\"null\"],\"time_minutes\":1,\"instruction_detail\":\"用鍋鏟將炒好的番茄炒蛋盛入盤中。\"}],\"estimated_total_time\":\"8分鐘\",\"temperature\":\"null\",\"warnings\":\"null\",\"notes\":\"null\"}]}],\"time_minutes\":8,\"warnings\":\"新手需要注意控制火候，避免燒焦。\"}\n]\n}"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:32:51.824","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character ']' after top-level value","request_id":"38f7ac7d-e77c-44dd-b8e5-ade5335961a7"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:32:51.824","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.647394167s","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:32:51.862","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f16bfa13-e5f3-4bf1-b468-522154e391b7","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:32:51.862","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"f16bfa13-e5f3-4bf1-b468-522154e391b7"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:32:51.862","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"212.5µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:39:59.118","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:39:59.118","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:39:59.118","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.067","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:05.068","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:14.024","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8f7d872e-0dea-4366-8a24-573a7b2d5a45","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:14.025","msg":"快取未命中","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:23.044","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:23.044","msg":"食譜推薦成功","service":"recipe-generator","request_id":"8f7d872e-0dea-4366-8a24-573a7b2d5a45","dish_name":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:23.045","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.020732958s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:40:23.072","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"bf8d217b-f876-4b78-84c6-be59f93cd849","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:40:23.073","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"bf8d217b-f876-4b78-84c6-be59f93cd849"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:40:23.073","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"179.25µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:46:49.740","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:46:49.740","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:46:49.741","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.896","msg":"Loading configuration","service":"recipe-generator","openrouter_api_key":"sk-o...d315","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:52:52.897","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:12.772","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"82bfee9f-34c5-4728-8666-6a2a926f4cc0","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:12.773","msg":"快取未命中","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:21.755","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:21.755","msg":"食譜推薦成功","service":"recipe-generator","request_id":"82bfee9f-34c5-4728-8666-6a2a926f4cc0","dish_name":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:21.756","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.9843915s","request_id":""}
{"level":"\u001b[32mINF\u001b[0m","time":"00:53:21.763","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"5c0741d9-ce57-4247-a62e-3b4a13f38416","client_ip":"::1"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:53:21.763","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"5c0741d9-ce57-4247-a62e-3b4a13f38416"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:53:21.763","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"366.958µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:54:11.301","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:54:11.301","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:54:11.301","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.992","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.992","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.992","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.992","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.992","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.993","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"00:57:54.993","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:58:00.384","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:00.384","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜(並且用繁體中文回答）。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"null\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n14. 不要使用\\n，不需要換行\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"suggested_recipes\": \n        {\n            \"dish_name\": \"菜名\",\n            \"dish_description\": \"描述\",\n            \"ingredients\": [\n                {\n                    \"name\": \"食材名稱\",\n                    \"type\": \"食材類型\",\n                    \"amount\": \"數量\",\n                    \"unit\": \"單位\",\n                    \"preparation\": \"處理方式\"\n                }\n            ],\n            \"equipment\": [\n                {\n                    \"name\": \"設備名稱\",\n                    \"type\": \"設備類型\",\n                    \"size\": \"尺寸\",\n                    \"material\": \"材質\",\n                    \"power_source\": \"能源類型\"\n                }\n            ],\n            \"recipe\": [\n                {\n                    \"step_number\": 1,\n                    \"title\": \"步驟標題\",\n                    \"description\": \"步驟描述\",\n                    \"actions\": [\n                        {\n                            \"action\": \"動作\",\n                            \"tool_required\": \"工具\",\n                            \"material_required\": [\"材料\"],\n                            \"time_minutes\": 1,\n                            \"instruction_detail\": \"細節\"\n                        }\n                    ],\n                    \"estimated_total_time\": \"時間\",\n                    \"temperature\": \"火侯\",\n                    \"warnings\": \"無\",\n                    \"notes\": \"備註\"\n                }\n            ]\n        }\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:58:00.385","msg":"快取未命中","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:58:08.914","msg":"快取已儲存","service":"recipe-generator","鍵":"text:6d4eb168f1b6f52db6a8762eaf9a92547c652da281d20534933b11f3de4a439f"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:58:08.914","msg":"AI 回應解析失敗","service":"recipe-generator","error":"unexpected end of JSON input","ai_response_length":4562,"ai_response_preview":"{\"suggested_recipes\":{\"dish_name\":\"番茄炒蛋\",\"dish_description\":\"簡單美味的家常菜，快速又營養。\",\"ingredients\":[{\"name\":\"小小番茄\",\"type\":\"蔬菜\",\"amount\":\"2\",\"unit\":\"顆\",\"preparation\":\"切塊\"},{\"name\":\"雞蛋\",\"type\":\"蛋類\",\"amount\":\"3\",\"unit\":\"顆\",\"preparation\":\"打散\"}],\"equipment\":[{\"name\":\"炒鍋\",\"type\":\"鍋具\",\"size\":\"中型\",\"material\":\"不銹鋼\",\"power_source\":\"瓦斯爐\"}],\"recipe\":[{\"step_number\":1,\"title\":\"準備工作\",\"description\":\"將所有食材準備好，雞蛋打散，番茄切塊。\",\"actions\":[{\"action\":\"打蛋\",\"tool_required\":\"碗、筷子\",\"material_required\":[\"雞蛋\"],\"time_minutes\":1,\"instruction_detail\":\"將雞蛋打入碗中，用筷子快速攪拌至蛋黃和蛋白完全混合。\"},{\"action\":\"切番茄\",\"tool_required\":\"刀、砧板\",\"material_required\":[\"小小番茄\"],\"time_minutes\":1,\"instruction_detail\":\"將小番茄洗淨，用刀切成小塊。\"}],\"estimated_total_time\":\"2分鐘\",\"temperature\":\"無\",\"warnings\":\"null\",\"notes\":\"準備工作要做好，才能讓烹飪過程更順暢。\"},{\"step_number\":2,\"title\":\"熱鍋\",\"description\":\"將炒鍋加熱，加入適量的油。\",\"actions\":[{\"action\":\"開火\",\"tool_required\":\"瓦斯爐\",\"material_required\":[],\"time_minutes\":1,\"instruction_detail\":\"打開瓦斯爐，調整火力至中火。\"},{\"action\":\"熱鍋\",\"tool_required\":\"炒鍋\",\"material_required\":[],\"time_minutes\":1,\"instruction_detail\":\"將炒鍋放在瓦斯爐上加熱約1分鐘，直到鍋底開始冒煙。\"},{\"action\":\"倒油\",\"tool_required\":\"油罐\",\"material_required\":[\"食用油\"],\"time_minutes\":0,\"instruction_detail\":\"倒入約1湯匙食用油，輕輕晃動鍋子，讓油均勻佈滿鍋底。\"}],\"estimated_total_time\":\"2分鐘\",\"temperature\":\"中火\",\"warnings\":\"注意不要讓油溫過高，以免燒焦。\",\"notes\":\"可以用筷子或鍋鏟試一下油溫，如果筷子或鍋鏟周圍開始冒泡，就表示油溫夠了。\"},{\"step_number\":3,\"title\":\"炒蛋\",\"description\":\"將打散的雞蛋倒入鍋中，快速翻炒至半熟。\",\"actions\":[{\"action\":\"倒蛋液\",\"tool_required\":\"碗\",\"material_required\":[\"雞蛋\"],\"time_minutes\":0,\"instruction_detail\":\"將打散的雞蛋液倒入熱鍋中。\"},{\"action\":\"翻炒\",\"tool_required\":\"鍋鏟\",\"material_required\":[\"雞蛋\"],\"time_minutes\":1,\"instruction_detail\":\"用鍋鏟快速翻炒雞蛋，直到雞蛋開始凝固，但仍保持部分液態。\"}],\"estimated_total_time\":\"1分鐘\",\"temperature\":\"中火\",\"warnings\":\"炒蛋時要快速翻炒，以免雞蛋黏鍋。\",\"notes\":\"炒蛋的時間不要太長，以免雞蛋變老。\"},{\"step_number\":4,\"title\":\"加入番茄\",\"description\":\"將切好的番茄塊倒入鍋中，與雞蛋一起翻炒。\",\"actions\":[{\"action\":\"加入番茄\",\"tool_required\":\"碗\",\"material_required\":[\"小小番茄\"],\"time_minutes\":0,\"instruction_detail\":\"將切好的番茄塊倒入鍋中。\"},{\"action\":\"翻炒\",\"tool_required\":\"鍋鏟\",\"material_required\":[\"雞蛋\",\"小小番茄\"],\"time_minutes\":2,\"instruction_detail\":\"用鍋鏟將番茄和雞蛋一起翻炒，直到番茄開始變軟，釋放出汁水。\"}],\"estimated_total_time\":\"2分鐘\",\"temperature\":\"中火\",\"warnings\":\"null\",\"notes\":\"翻炒時可以稍微壓一下番茄，幫助釋放汁水。\"},{\"step_number\":5,\"title\":\"調味\",\"description\":\"加入鹽或其他調味料，繼續翻炒至入味。\",\"actions\":[{\"action\":\"加鹽\",\"tool_required\":\"鹽罐\",\"material_required\":[\"鹽\"],\"time_minutes\":0,\"instruction_detail\":\"加入少許鹽（約1/4茶匙），根據個人口味調整。\"},{\"action\":\"翻炒\",\"tool_required\":\"鍋鏟\",\"material_required\":[\"雞蛋\",\"小小番茄\",\"鹽\"],\"time_minutes\":1,\"instruction_detail\":\"繼續翻炒，讓鹽和其他調味料均勻分佈在食材中。\"}],\"estimated_total_time\":\"1分鐘\",\"temperature\":\"小火\",\"warnings\":\"避免加入過多的鹽，以免過鹹。\",\"notes\":\"可以根據個人喜好加入其他調味料，例如糖或胡椒粉。\"},{\"step_number\":6,\"title\":\"起鍋\",\"description\":\"將炒好的番茄炒蛋盛出，即可享用。\",\"actions\":[{\"action\":\"盛盤\",\"tool_required\":\"盤子\",\"material_required\":[\"雞蛋\",\"小小番茄\"],\"time_minutes\":0,\"instruction_detail\":\"將炒好的番茄炒蛋盛入盤中。\"}],\"estimated_total_time\":\"0分鐘\",\"temperature\":\"無\",\"warnings\":\"null\",\"notes\":\"裝飾：可以在番茄炒蛋上撒上一些蔥花或香菜，增加香味和美觀。\"}],\"estimated_total_time\":\"8分鐘\",\"temperature\":\"中火\",\"warnings\":\"null\",\"notes\":\"烹飪時間可能會因為食材的狀態和火候的差異而有所不同。\"}"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:58:08.915","msg":"食譜推薦失敗","service":"recipe-generator","error":"failed to parse AI response: unexpected end of JSON input","request_id":"aceab0ed-c569-4344-ab0f-49e5a6f4ba7a"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:58:08.915","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"8.531691875s","request_id":"","error_type":"server_error"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:08.947","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:08.947","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:08.947","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e"}
{"level":"\u001b[32mINF\u001b[0m","time":"00:58:08.947","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:08.947","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"00:58:08.947","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"00:58:08.947","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"f6b1a434-b9c4-410f-bddc-9be6764f076e"}
{"level":"\u001b[31mERR\u001b[0m","time":"00:58:08.947","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"299.167µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:09.531","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:09.531","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:09.531","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":0,"未命中次數":1,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.298","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:17.299","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:27.665","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:27.665","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜(並且用繁體中文回答）。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"null\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n14. 不要使用\\n，不需要換行\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"dish_name\": \"菜名\",\n    \"dish_description\": \"描述\",\n    \"ingredients\": [\n        {\n            \"name\": \"食材名稱\",\n            \"type\": \"食材類型\",\n            \"amount\": \"數量\",\n            \"unit\": \"單位\",\n            \"preparation\": \"處理方式\"\n        }\n    ],\n    \"equipment\": [\n        {\n            \"name\": \"設備名稱\",\n            \"type\": \"設備類型\",\n            \"size\": \"尺寸\",\n            \"material\": \"材質\",\n            \"power_source\": \"能源類型\"\n        }\n    ],\n    \"recipe\": [\n        {\n            \"step_number\": 1,\n            \"title\": \"步驟標題\",\n            \"description\": \"步驟描述\",\n            \"actions\": [\n                {\n                    \"action\": \"動作\",\n                    \"tool_required\": \"工具\",\n                    \"material_required\": [\"材料\"],\n                    \"time_minutes\": 1,\n                    \"instruction_detail\": \"細節\"\n                }\n            ],\n            \"estimated_total_time\": \"時間\",\n            \"temperature\": \"火侯\",\n            \"warnings\": \"無\",\n            \"notes\": \"備註\"\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:27.666","msg":"快取未命中","service":"recipe-generator","鍵":"text:a9b84731e6391284008e89238b46f27878072863c27cdf20ae54d525c83499dd"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:37.062","msg":"快取已儲存","service":"recipe-generator","鍵":"text:a9b84731e6391284008e89238b46f27878072863c27cdf20ae54d525c83499dd"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:37.063","msg":"食譜推薦成功","service":"recipe-generator","request_id":"84d03de3-1a43-4fab-a4e6-b5e1545b7e04","dish_name":"番茄炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:37.063","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"9.39887725s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:37.071","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:37.071","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:37.071","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:37.071","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:37.071","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:37.071","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"01:00:37.071","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"4980def3-d8be-4d94-a677-0a6f8e99c4a3"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:00:37.072","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"453.667µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:45.180","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a4d92900-3d07-4ebc-99eb-c21226c58304"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:45.180","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a4d92900-3d07-4ebc-99eb-c21226c58304"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:00:45.180","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a4d92900-3d07-4ebc-99eb-c21226c58304"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:45.180","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"a4d92900-3d07-4ebc-99eb-c21226c58304","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:45.180","msg":"快取未命中","service":"recipe-generator","鍵":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:00:52.561","msg":"快取已儲存","service":"recipe-generator","鍵":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:00:52.561","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '}' after array element","request_id":"a4d92900-3d07-4ebc-99eb-c21226c58304"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:00:52.561","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.381384917s","request_id":"","error_type":"server_error"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:03:09.044","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a923ae4f-55d4-4738-b6f1-d42404b93162"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:03:09.044","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a923ae4f-55d4-4738-b6f1-d42404b93162"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:03:09.044","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"a923ae4f-55d4-4738-b6f1-d42404b93162"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:03:09.044","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"a923ae4f-55d4-4738-b6f1-d42404b93162","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:03:09.044","msg":"快取命中","service":"recipe-generator","鍵":"text:1544d499f7365f706d2af6584d4f3ea135cf2dcbd319047dc65a433b240f3302"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:03:09.044","msg":"食譜生成失敗","service":"recipe-generator","error":"failed to parse AI response: invalid character '}' after array element","request_id":"a923ae4f-55d4-4738-b6f1-d42404b93162"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:03:09.044","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"298.875µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:37.197","msg":"Shutting down server...","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:37.197","msg":"Server exited","service":"recipe-generator"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:37.197","msg":"快取管理員已關閉","service":"recipe-generator","命中次數":1,"未命中次數":2,"淘汰次數":0}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"載入設定","service":"recipe-generator","openrouter_api_key":"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","openrouter_model":"google/gemini-2.0-flash-001"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"快取管理員已初始化","service":"recipe-generator","最大容量":1000,"存活時間":"24h0m0s","清理間隔":"10m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"Starting router setup","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"Initializing services","service":"recipe-generator","cache_enabled":true,"queue_workers":5,"model":"google/gemini-2.0-flash-001","timeout":"2m0s"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"Recipe services initialized successfully","service":"recipe-generator","ai_service_initialized":true,"cache_manager_initialized":true,"environment":"development"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"Router setup completed successfully","service":"recipe-generator","debug_mode":true,"version":"1.0.0","environment":"development","ai_service_initialized":true,"recipe_service_initialized":true,"cache_manager_initialized":true,"timeout":"2m0s","max_body_size":10485760}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:43.901","msg":"啟動應用","service":"recipe-generator","version":"1.0.0","env":"development","debug":true}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:07:47.958","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"e69886b9-0a35-42b9-b918-6ae6fb5c0cf5"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:07:47.958","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"e69886b9-0a35-42b9-b918-6ae6fb5c0cf5"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:07:47.958","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/generate","request_id":"e69886b9-0a35-42b9-b918-6ae6fb5c0cf5"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:47.958","msg":"開始處理食譜生成請求","service":"recipe-generator","request_id":"e69886b9-0a35-42b9-b918-6ae6fb5c0cf5","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:47.959","msg":"快取未命中","service":"recipe-generator","鍵":"text:df89c4191f742bbb8d2dc9d8e126821e8fa4b6158ff85459e0817149ba3eba92"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:55.925","msg":"快取已儲存","service":"recipe-generator","鍵":"text:df89c4191f742bbb8d2dc9d8e126821e8fa4b6158ff85459e0817149ba3eba92"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:07:55.925","msg":"AI 回應內容 (recipe/generate)","service":"recipe-generator","ai_response_length":4525,"ai_response_preview":"{\"dish_name\":\"手機炒蛋\",\"dish_description\":\"一道以雞蛋和手機為主要材料的炒蛋料理，適合新手嘗試。\",\"ingredients\":[{\"name\":\"手機\",\"type\":\"電子產品\",\"amount\":\"未知\",\"unit\":\"個\",\"preparation\":\"清潔表面（禁用任何清潔劑，可能損壞手機）\"},{\"name\":\"雞蛋\",\"type\":\"食材\",\"amount\":\"2\",\"unit\":\"顆\",\"preparation\":\"無\"}],\"equipment\":[{\"name\":\"炒鍋\",\"type\":\"廚具\",\"size\":\"未知\",\"material\":\"未知\",\"power_source\":\"瓦斯爐/電磁爐\"},{\"name\":\"鍋鏟\",\"type\":\"廚具\",\"size\":\"未知\",\"material\":\"未知\",\"power_source\":\"無\"}],\"recipe\":[{\"step_number\":1,\"title\":\"準備工作\",\"description\":\"清潔手機表面，將雞蛋打入碗中。\",\"actions\":[{\"action\":\"清潔手機表面\",\"tool_required\":\"未知\",\"material_required\":[\"手機\",\"（可選）乾淨的布\"],\"time_minutes\":30,\"instruction_detail\":\"使用乾淨的布輕輕擦拭手機表面，去除灰塵。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"室溫\",\"warnings\":\"務必使用乾燥的布，避免液體進入手機！清潔時切勿施加過大壓力。\",\"notes\":\"清潔手機只是為了讓炒蛋看起來比較衛生。\"},{\"step_number\":2,\"title\":\"打蛋\",\"description\":\"將雞蛋打入碗中，加入少許鹽（可選）並攪拌均勻。\",\"actions\":[{\"action\":\"打蛋\",\"tool_required\":\"碗\",\"material_required\":[\"雞蛋\"],\"time_minutes\":60,\"instruction_detail\":\"輕輕將雞蛋敲開，倒入碗中。\"},{\"action\":\"攪拌\",\"tool_required\":\"筷子/打蛋器\",\"material_required\":[\"雞蛋\",\"鹽（可選）\"],\"time_minutes\":30,\"instruction_detail\":\"用筷子或打蛋器朝同一方向攪拌，直到蛋黃和蛋白混合均勻。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"室溫\",\"warnings\":\"避免過度攪拌，以免雞蛋過於蓬鬆。\",\"notes\":\"加入少許鹽可以提升雞蛋的風味。\"},{\"step_number\":3,\"title\":\"加熱\",\"description\":\"將炒鍋放在爐子上，開中小火加熱。\",\"actions\":[{\"action\":\"放置炒鍋\",\"tool_required\":\"爐子\",\"material_required\":[\"炒鍋\"],\"time_minutes\":5,\"instruction_detail\":\"將炒鍋平穩的放在爐子上。\"},{\"action\":\"加熱炒鍋\",\"tool_required\":\"爐子\",\"material_required\":[\"炒鍋\"],\"time_minutes\":120,\"instruction_detail\":\"開啟中小火，加熱炒鍋至鍋底微熱。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"中小火\",\"warnings\":\"務必注意火候，避免燒焦。加熱時間不宜過長，以免鍋子過熱。\",\"notes\":\"可以用手放在鍋子上感受溫度，感覺到溫熱即可。\"},{\"step_number\":4,\"title\":\"放入手機和雞蛋\",\"description\":\"將手機和攪拌好的雞蛋倒入鍋中。\",\"actions\":[{\"action\":\"放入手機\",\"tool_required\":\"無\",\"material_required\":[\"手機\"],\"time_minutes\":10,\"instruction_detail\":\"小心地將手機放入鍋中。\"},{\"action\":\"倒入雞蛋\",\"tool_required\":\"無\",\"material_required\":[\"雞蛋\"],\"time_minutes\":5,\"instruction_detail\":\"將攪拌好的雞蛋液倒入鍋中，均勻覆蓋手機（如果可以）。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"中小火\",\"warnings\":\"請勿將手機完全浸入雞蛋液中。注意避免雞蛋液流入手機的縫隙。\",\"notes\":\"如果鍋子夠大，盡量讓雞蛋液均勻覆蓋手機。\"},{\"step_number\":5,\"title\":\"翻炒\",\"description\":\"用鍋鏟翻炒雞蛋，確保雞蛋全熟。\",\"actions\":[{\"action\":\"翻炒雞蛋\",\"tool_required\":\"鍋鏟\",\"material_required\":[\"雞蛋\"],\"time_minutes\":300,\"instruction_detail\":\"用鍋鏟輕輕翻炒雞蛋，將雞蛋炒至凝固，呈金黃色。確保雞蛋完全熟透。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"中小火\",\"warnings\":\"務必將雞蛋炒熟，避免食用生雞蛋。翻炒時注意不要刮傷鍋子。\",\"notes\":\"可以將雞蛋切成小塊方便食用。\"},{\"step_number\":6,\"title\":\"出鍋\",\"description\":\"將炒好的手機炒蛋盛入盤中。\",\"actions\":[{\"action\":\"盛入盤中\",\"tool_required\":\"鍋鏟\",\"material_required\":[\"盤子\"],\"time_minutes\":30,\"instruction_detail\":\"用鍋鏟將炒好的手機炒蛋鏟入盤中。\"}],\"estimated_total_time\":\"未知\",\"temperature\":\"室溫\",\"warnings\":\"注意燙手。\",\"notes\":\"可以根據個人喜好撒上一些蔥花或香菜。\"}],\"estimated_total_time\":\"未知\",\"total_time_minutes\":755,\"warnings\":\"此食譜包含將手機加熱的步驟，存在潛在風險。請務必小心操作，並對可能發生的手機損壞負責。不建議兒童單獨操作。\", \"nutritional_information\":{\"calories\":\"未知\",\"protein\":\"未知\",\"fat\":\"未知\",\"carbohydrates\":\"未知\"}}"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:55.926","msg":"食譜生成成功","service":"recipe-generator","request_id":"e69886b9-0a35-42b9-b918-6ae6fb5c0cf5","dish_name":"手機炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:07:55.927","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/generate","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.969083833s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.324","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.324","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.324","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:08.325","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.325","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06","req":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.325","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06","serviceReq":{"available_ingredients":[{"name":"小小番茄","type":"蔬菜","amount":"2","unit":"顆","preparation":"切塊"},{"name":"雞蛋","type":"蛋類","amount":"3","unit":"顆","preparation":"打散"}],"available_equipment":[{"name":"炒鍋","type":"鍋具","size":"中型","material":"不鏽鋼","power_source":"瓦斯爐"}],"preference":{"cooking_method":"炒","dietary_restrictions":["無麩質"],"serving_size":"2人份"}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:08.325","msg":"SuggestRecipes 組裝的 prompt","service":"recipe-generator","prompt":"請根據以下可用食材和設備，推薦適合的食譜(並且用繁體中文回答）。\n\n可用食材：\n- 小小番茄 (蔬菜): 2顆, 切塊\n- 雞蛋 (蛋類): 3顆, 打散\n\n\n可用設備：\n- 炒鍋 (鍋具): 中型, 不鏽鋼, 瓦斯爐\n\n\n烹飪偏好：\n- 烹飪方式：炒\n- 飲食限制：無麩質\n- 份量：2人份\n\n要求：\n1. 只根據提供的食材和設備推薦內容，不要添加未出現的食材或設備\n2. 不要使用預設值或猜測值，若無法確定請填寫 \"未知\"\n3. 每個步驟都要非常詳細，適合新手操作\n4. 動作描述要具體明確，包含具體的時間和溫度\n5. 注意事項要特別提醒新手容易忽略的細節\n6. 所有字段都必須使用雙引號\n7. 不需要考慮可讀性，請省略所有空格和換行，返回最緊湊的 JSON 格式\n8. 推薦的食譜要優先使用已有的食材和設備\n9. 如果某些食材或設備不足，可以建議替代方案\n10. 每個食譜都要考慮到烹飪難度和時間\n11. time_minutes 欄位必須是整數，不能有小數點（以秒為單位）\n12. warnings 欄位必須是字串類型，如果沒有警告事項請填寫 \"null\"\n13. 每個步驟都必須包含 warnings 欄位，不能省略此欄位\n14. 不要使用\\n，不需要換行\n\n請以以下 JSON 格式返回（僅作為範例，請勿直接複製內容）：\n{\n    \"dish_name\": \"菜名\",\n    \"dish_description\": \"描述\",\n    \"ingredients\": [\n        {\n            \"name\": \"食材名稱\",\n            \"type\": \"食材類型\",\n            \"amount\": \"數量\",\n            \"unit\": \"單位\",\n            \"preparation\": \"處理方式\"\n        }\n    ],\n    \"equipment\": [\n        {\n            \"name\": \"設備名稱\",\n            \"type\": \"設備類型\",\n            \"size\": \"尺寸\",\n            \"material\": \"材質\",\n            \"power_source\": \"能源類型\"\n        }\n    ],\n    \"recipe\": [\n        {\n            \"step_number\": 1,\n            \"title\": \"步驟標題\",\n            \"description\": \"步驟描述\",\n            \"actions\": [\n                {\n                    \"action\": \"動作\",\n                    \"tool_required\": \"工具\",\n                    \"material_required\": [\"材料\"],\n                    \"time_minutes\": 1,\n                    \"instruction_detail\": \"細節\"\n                }\n            ],\n            \"estimated_total_time\": \"時間\",\n            \"temperature\": \"火侯\",\n            \"warnings\": \"無\",\n            \"notes\": \"備註\"\n        }\n    ]\n}"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:08.325","msg":"快取未命中","service":"recipe-generator","鍵":"text:a9b84731e6391284008e89238b46f27878072863c27cdf20ae54d525c83499dd"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:14.716","msg":"快取已儲存","service":"recipe-generator","鍵":"text:a9b84731e6391284008e89238b46f27878072863c27cdf20ae54d525c83499dd"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:14.716","msg":"食譜推薦成功","service":"recipe-generator","request_id":"0a26b412-2994-48b9-a116-a2d32c488b06","dish_name":"番茄炒蛋"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:14.716","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"6.391602458s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:14.724","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:14.724","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:14.724","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/suggest","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:14.724","msg":"開始處理食譜推薦請求","service":"recipe-generator","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee","client_ip":"::1"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:14.724","msg":"用戶輸入 (原始 req)","service":"recipe-generator","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee","req":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":""}}}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:14.724","msg":"轉換後的 serviceReq","service":"recipe-generator","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee","serviceReq":{"available_ingredients":[],"available_equipment":[],"preference":{"cooking_method":"","dietary_restrictions":null,"serving_size":""}}}
{"level":"\u001b[31mERR\u001b[0m","time":"01:08:14.724","msg":"食譜推薦失敗","service":"recipe-generator","error":"missing required fields: cooking_method and serving_size are required","request_id":"8e5153a0-27d5-4867-b02b-fecb95a940ee"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:08:14.724","msg":"伺服器錯誤","service":"recipe-generator","status":500,"method":"POST","path":"/api/v1/recipe/suggest","ip":"::1","user-agent":"python-requests/2.32.3","latency":"202.667µs","request_id":"","error_type":"server_error"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:26.697","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"26c1cf25-9a99-4e2b-b0e2-d212f08c85de"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:26.697","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"26c1cf25-9a99-4e2b-b0e2-d212f08c85de"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:26.697","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"26c1cf25-9a99-4e2b-b0e2-d212f08c85de"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:26.723","msg":"快取未命中","service":"recipe-generator","鍵":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:26.723","msg":"OpenRouter image_url debug","service":"recipe-generator","prefix":"[HAS_PREFIX]","image_url_start":"data:image/jpeg;base64,/9j/2wCEAAUDBAQEAwUEBAQFBQUGBwwIBwcHB"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:33.760","msg":"快取已儲存","service":"recipe-generator","鍵":"multimodal:8e35301c21a6540f547f87b4e60101a1db2e5452dd6c8eed5ee253ebcacefc8e:b5db00f2764e3ea4e3849406f9bfce217993f9d0feee52b911908a6c56d90e60"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:33.760","msg":"Successfully identified ingredients","service":"recipe-generator","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:33.760","msg":"Successfully identified ingredients","service":"recipe-generator","request_id":"26c1cf25-9a99-4e2b-b0e2-d212f08c85de","ingredients_count":30,"equipment_count":4}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:33.760","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"7.064665208s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:33.769","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"3af12396-7550-4e5d-99ea-ce772fabc33b"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:33.769","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"3af12396-7550-4e5d-99ea-ce772fabc33b"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:33.769","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/ingredient","request_id":"3af12396-7550-4e5d-99ea-ce772fabc33b"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:08:33.769","msg":"Invalid image format (handler)","service":"recipe-generator","request_id":"3af12396-7550-4e5d-99ea-ce772fabc33b","image_type":"unknown_format","image_length":21}
{"level":"\u001b[33mWRN\u001b[0m","time":"01:08:33.769","msg":"用戶端錯誤","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/ingredient","ip":"::1","user-agent":"python-requests/2.32.3","latency":"342µs","request_id":"","error_type":"client_error"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:44.472","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"b5f622be-d19e-4fa2-9b32-6a820adeb1ea"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:44.472","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"b5f622be-d19e-4fa2-9b32-6a820adeb1ea"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:44.472","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"b5f622be-d19e-4fa2-9b32-6a820adeb1ea"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:44.472","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"b5f622be-d19e-4fa2-9b32-6a820adeb1ea","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:44.472","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"base64_data_uri_jpeg","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:44.473","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250515_010844.json","prompt_length":967,"image_length":20775}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:44.478","msg":"快取未命中","service":"recipe-generator","鍵":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:44.478","msg":"OpenRouter image_url debug","service":"recipe-generator","prefix":"[HAS_PREFIX]","image_url_start":"data:image/jpeg;base64,/9j/2wCEAAUDBAQEAwUEBAQFBQUGBwwIBwcHB"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.014","msg":"快取已儲存","service":"recipe-generator","鍵":"multimodal:849c49fab88bbb349e32d0a19ca47a835c6c47119ec6a56f555b29d30671378c:8b8cfe49231856dbcf6d4ed191fea116fda5d88a46988ef5be8377cfff96d851"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.015","msg":"食物識別成功","service":"recipe-generator","foods_count":1,"image_type":"base64_data_uri_jpeg"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.015","msg":"食物辨識成功","service":"recipe-generator","request_id":"b5f622be-d19e-4fa2-9b32-6a820adeb1ea","foods_count":1}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.015","msg":"請求完成","service":"recipe-generator","status":200,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"2.543201834s","request_id":""}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:47.022","msg":"Configuration injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"e907c526-53f0-447a-832b-1458a6b07ac6"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:47.022","msg":"AI service injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"e907c526-53f0-447a-832b-1458a6b07ac6"}
{"level":"\u001b[36mDBG\u001b[0m","time":"01:08:47.022","msg":"Recipe services injected into context","service":"recipe-generator","path":"/api/v1/recipe/food","request_id":"e907c526-53f0-447a-832b-1458a6b07ac6"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.022","msg":"開始處理食物辨識請求","service":"recipe-generator","request_id":"e907c526-53f0-447a-832b-1458a6b07ac6","client_ip":"::1"}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.022","msg":"開始處理食物識別請求","service":"recipe-generator","image_type":"unknown_format","description_hint":""}
{"level":"\u001b[32mINF\u001b[0m","time":"01:08:47.023","msg":"已保存 AI 請求數據","service":"recipe-generator","filename":"logs/ai_requests/food_recognition_20250515_010847.json","prompt_length":967,"image_length":18}
{"level":"\u001b[31mERR\u001b[0m","time":"01:08:47.023","msg":"AI 服務請求失敗","service":"recipe-generator","error":"failed to process image: invalid image data format"}
{"level":"\u001b[31mERR\u001b[0m","time":"01:08:47.023","msg":"圖片格式錯誤 (AI service)","service":"recipe-generator","error":"failed to process image: invalid image data format","request_id":"e907c526-53f0-447a-832b-1458a6b07ac6","image_type":"unknown_format","image_length":18,"description_hint":""}
{"level":"\u001b[33mWRN\u001b[0m","time":"01:08:47.023","msg":"用戶端錯誤","service":"recipe-generator","status":400,"method":"POST","path":"/api/v1/recipe/food","ip":"::1","user-agent":"python-requests/2.32.3","latency":"1.033292ms","request_id":"","error_type":"client_error"}
